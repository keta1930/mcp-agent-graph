# Task Manager（任务管理器）

让 Agent 通过交互式对话帮助你创建定时任务，实现工作流的自动化执行。

## 核心能力

Task Manager 让 Agent 像助手一样，通过对话引导你创建定时任务：

| 能力 | 说明 |
|------|------|
| **交互式创建** | Agent 通过提问了解需求，引导你完成任务配置 |
| **单次任务** | 在指定时间执行一次工作流，如"2月28日下午5点生成报告" |
| **周期任务** | 按时间规律重复执行，如"每天早上9点分析数据" |
| **批量执行** | 一次触发可并发运行多个工作流实例 |
| **任务管理** | 查看任务列表、执行历史，暂停或删除任务 |

## 使用场景

| 场景 | 示例 |
|------|------|
| 定时报告 | 每周一早上生成上周销售报告 |
| 数据分析 | 每天凌晨分析前一天的用户行为数据 |
| 定期提醒 | 每月1号提醒续费和账单 |
| 批量处理 | 每晚同时处理5个区域的数据 |
| 一次性任务 | 在特定日期执行某个工作流 |

## 如何使用

### 创建任务的对话流程

你只需要告诉 Agent 你的需求，Agent 会引导你完成配置：

```
你："我想每天早上9点自动生成销售报告"

Agent："好的，我来帮你创建这个任务。请问：
1. 要执行哪个工作流？
2. 需要传递什么输入内容给工作流？
3. 需要并发执行多少个实例？"

你："执行 sales_report 工作流，输入'生成昨日销售报告'，1个实例就够了"

Agent："明白了。我将创建一个周期任务：
- 任务名称：每日销售报告
- 执行工作流：sales_report
- 输入内容：生成昨日销售报告
- 执行时间：每天 9:00（Cron: 0 9 * * *）
- 执行数量：1个实例

确认无误后，我将创建任务配置并注册。"
```

### Agent 可以帮你做什么

| Agent 操作 | 说明 |
|-----------|------|
| 了解需求 | 询问任务目的、执行时机、执行内容 |
| 解释概念 | 说明单次任务和周期任务的区别，解释 Cron 表达式 |
| 创建配置 | 根据你的需求生成 JSON 格式的任务配置 |
| 注册任务 | 将配置提交到系统，启动定时调度 |
| 调整优化 | 根据你的反馈修改配置 |

### 常见时间设置

Agent 会帮你设置执行时间，以下是一些常见的时间规律：

| 需求 | Agent 使用的 Cron 表达式 |
|------|------------------------|
| 每天早上9点 | `0 9 * * *` |
| 每天下午2点30分 | `30 14 * * *` |
| 每周一早上9点 | `0 9 * * 1` |
| 每月1号凌晨 | `0 0 1 * *` |
| 每15分钟 | `*/15 * * * *` |
| 工作日早上9点 | `0 9 * * 1-5` |

## 任务管理

创建任务后，你可以在界面上：

| 操作 | 说明 |
|------|------|
| 查看任务列表 | 看到所有已创建的任务及其状态 |
| 查看执行历史 | 了解任务何时运行、触发了哪些工作流 |
| 暂停任务 | 临时停止任务的自动执行 |
| 恢复任务 | 重新启动已暂停的任务 |
| 删除任务 | 彻底移除不再需要的任务 |

## 注意事项

- **工作流必须存在**：创建任务前，确保要执行的工作流已经创建
- **时间不能过期**：单次任务的执行时间必须在未来
- **任务名称唯一**：同一类型的任务名称不能重复
- **需要文件工具**：Agent 需要使用文件工具来创建配置文件，请确保已授权

## 相关文档

- [Task（任务）](../graph/task.zh.md) - 任务的配置说明和技术细节
- [文件工具](file-tool.zh.md) - Agent 创建任务配置文件所需的工具
