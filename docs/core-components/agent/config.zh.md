# Agent 配置

Agent 配置定义行为、能力和约束。每个设置控制智能体如何处理请求和使用工具。

## 配置字段

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| **name** | 字符串 | 是 | 唯一标识符（不含 `/`、`\`、`.`） |
| **card** | 字符串 | 是 | 界面显示的简要能力描述 |
| **model** | 字符串 | 是 | 大语言模型名称（必须已注册） |
| **category** | 字符串 | 是 | 用于组织的分类 |
| **instruction** | 字符串 | 否 | 定义行为的系统提示词 |
| **max_actions** | 整数 | 否 | 迭代上限（1-200，默认：50） |
| **mcp** | 数组 | 否 | MCP 服务器名称列表 |
| **system_tools** | 数组 | 否 | 系统工具名称列表 |
| **tags** | 数组 | 否 | 用于搜索的标签（最多 20 个） |

## 字段详解

### name

用于 API 调用和界面选择的唯一标识符。

**规则：**
- 不能包含 `/`、`\` 或 `.`
- 每个用户下必须唯一
- 创建后不可更改

**示例：**
- ✅ `code-reviewer`
- ✅ `data_analyst`
- ❌ `my/agent`（包含 `/`）
- ❌ `agent.v2`（包含 `.`）

### card

显示在智能体列表和选择菜单中的简短描述。

**最佳实践：**
- 保持在 100 字符以内
- 关注智能体做什么，而非如何做
- 使用动词

**示例：**
- `审查代码的质量、安全性和最佳实践`
- `分析数据并生成可视化图表`
- `从代码生成技术文档`

### model

驱动智能体推理和工具使用的大语言模型。

**要求：**
- 模型必须在模型管理器中注册
- 模型必须处于活动和可访问状态

**常见选择：**
- `claude-sonnet-4.5` - 复杂推理最佳
- `gpt-5` - 强大的通用性能
- `deepseek-v3` - 快速且经济

### category

用于在界面中组织智能体的分类。

**常见分类：**
- `编程` - 代码生成、审查、调试
- `分析` - 数据分析、研究
- `写作` - 文档、内容创作
- `自动化` - 任务自动化、工作流
- `支持` - 客户支持、问答

### instruction

定义智能体个性、专业知识和行为的系统提示词。通用助手可留空。

**示例：**
```
您是一位专注于数据工程的高级 Python 开发者。
帮助用户时：
- 优先使用 pandas 和 numpy 解决方案
- 始终包含错误处理
- 解释性能影响
```

### max_actions

停止前的最大工具调用和推理步骤数。

| 范围 | 使用场景 |
|------|---------|
| 1-10 | 单步任务、简单问答 |
| 10-30 | 多步工作流、基础研究 |
| 30-50 | 复杂分析、迭代优化（默认） |
| 50-100 | 深度研究、大量代码生成 |
| 100-200 | 长时间运行的自动化、综合任务 |

### mcp

智能体可访问的 MCP 服务器名称列表。每个服务器必须在 MCP 管理器中配置并运行。

**参见：** [MCP 集成](../mcp/index.zh.md)

### system_tools

智能体可使用的内置系统工具列表。

**参见：** [系统工具](../tools/index.zh.md)

### tags

用于搜索、过滤和发现的标签。最多 20 个。

**示例：** `["python", "数据", "pandas", "分析", "可视化"]`

## 运行时配置覆盖

运行智能体时，可以覆盖或扩展配置：

| 覆盖项 | 效果 |
|--------|------|
| `model_name` | 使用不同模型 |
| `system_prompt` | 替换指令 |
| `mcp_servers` | 添加额外的 MCP 服务器 |
| `system_tools` | 添加额外的系统工具 |
| `max_iterations` | 更改迭代限制 |

## 下一步

- **[构建第一个 Agent](first-agent.zh.md)** - 逐步创建智能体
- **[Agent 循环](loop.zh.md)** - 理解执行流程
- **[系统工具](../tools/index.zh.md)** - 探索内置能力
- **[MCP 集成](../mcp/index.zh.md)** - 连接外部服务
