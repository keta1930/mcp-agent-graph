# Agent 记忆

Agent 的个人知识库，用于学习和改进。

## 什么是 Agent 记忆

Agent 记忆是 Agent 存储自己知识和经验的地方。与用户记忆（所有 Agent 共享）不同，Agent 记忆专属于每个 Agent。

**记忆归属：**

| 所有者 | 存储方式 | 访问权限 | 用途 |
|-------|----------|---------|------|
| 用户 | `owner: "user"` | 所有 Agent | 您的偏好、需求、背景 |
| Agent | `owner: "self"` | 仅该 Agent | Agent 学习的模式、经验 |

## 工作原理

每个 Agent 随时间构建自己的知识库。存储在一个 Agent 记忆中的知识对该 Agent 保持私有。

**示例流程：**

```
代码审查 Agent 学习：
"该用户偏好类型提示"
↓
存入代码审查 Agent 的记忆
↓
仅代码审查 Agent 记住这个模式
（其他 Agent 看不到）
```

## Agent 如何使用记忆

Agent 在任务执行期间自动管理记忆：

**任务前：** 搜索记忆，回忆相关模式和经验

**执行中：** 添加新学习，更新已有知识

**完成后：** 存储成功的方法和经验教训

## 管理 Agent 记忆

### 通过记忆管理器

从工作空间侧边栏打开记忆管理器。选择一个 Agent 的记忆卡片以查看和管理该 Agent 的知识。

**可用操作：**

| 操作 | 说明 |
|------|------|
| **查看** | 查看该 Agent 的所有分类和条目 |
| **添加** | 创建新分类或添加条目到 Agent 记忆 |
| **编辑** | 更新现有知识 |
| **删除** | 删除条目或整个分类 |
| **导出** | 下载为 JSON、Markdown、TXT 或 YAML |
| **导入** | 上传内容，通过 AI 解析 |

### 通过 Agent 工具

Agent 在对话期间使用记忆工具自主管理自己的知识。

**记忆工具：**

| 工具 | Agent 的操作 |
|------|--------------|
| `list_memory_categories` | 探索存在哪些分类 |
| `get_memory` | 检索特定知识 |
| `add_memory` | 存储新学习 |
| `update_memory` | 完善现有知识 |
| `delete_memory` | 删除过时信息 |

### 上下文隔离搜索

`search_memory_with_agent` 工具运行独立任务查找相关记忆，不占用主对话 token。Agent 探索分类、检索内容，返回精炼摘要。

## 组织方式

Agent 记忆按分类组织。分类名称使用小写字母、数字、下划线和连字符（2-50 个字符）。

**常见分类：**

| 类型 | 示例 | Agent 存储内容 |
|------|------|---------------|
| 能力 | `my_capabilities`、`my_tools` | Agent 能做什么 |
| 模式 | `task_patterns`、`workflow_tips` | 如何高效处理任务 |
| 知识 | `best_practices`、`common_issues` | 领域专业知识 |
| 学习 | `lessons_learned`、`feedback_received` | 从经验中改进 |

## 存储格式

每条记忆条目包含：

| 字段 | 说明 | 示例 |
|------|------|------|
| `item_id` | 唯一标识符 | `20241128_a3f2` |
| `content` | 记忆文本（建议最多 300 字） | "用户偏好 snake_case 命名" |
| `updated_at` | 最后修改日期 | `2024-11-28` |

**持久化：** 记忆跨对话保存。Agent 的知识随时间积累。

## 导出与导入

### 导出格式

下载四种格式的 Agent 记忆：

| 格式 | 用途 |
|------|------|
| JSON | 结构化数据备份 |
| YAML | 人类可读的结构化格式 |
| Markdown | 文档和笔记 |
| TXT | 简单查看的纯文本 |

### AI 导入

上传文本内容并选择模型。AI 解析文本，提取信息，为该特定 Agent 组织成分类。

**导入流程：**

```
上传文本 → AI 分析 → 提取信息 → 创建分类 → 存入 Agent 记忆
```

## 隐私与访问

- 每个 Agent 的记忆对该 Agent 是私有的
- 其他 Agent 无法访问另一个 Agent 的记忆
- 您可以通过记忆管理器查看和管理任何 Agent 的记忆
- Agent 记忆持久保存，直到删除

## 相关链接

- [用户记忆](user-memory.zh.md) - 共享的用户偏好
- [短期记忆](../short-term.zh.md) - 对话上下文
- [记忆工具](../../tools/memory-tool.zh.md) - 工具文档
