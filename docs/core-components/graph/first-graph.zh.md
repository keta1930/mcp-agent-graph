# 构建您的第一个 Graph

## 准备工作

创建图之前，确保您已：

- 至少注册了 **一个模型** （参见[模型注册](../model/register.zh.md)）
- 可访问 **工作台** 界面

## 创建 Graph

### 步骤 1：打开 Graph 管理

从工作台侧边栏进入 **Graph 编辑器**。

### 步骤 2：创建新图

点击 **创建 Graph**，填写必填字段：

| 字段 | 说明 | 示例 |
|------|------|------|
| **名称** | 唯一标识符（不含 `/`、`\`、`.`） | `content-pipeline` |
| **描述** | 工作流简要说明 | `研究、撰写和审核文章` |

### 步骤 3：添加节点

点击工具栏的 **+** 按钮添加第一个节点。

#### 节点配置

| 字段 | 说明 | 示例 |
|------|------|------|
| **名称** | 节点标识符 | `researcher` |
| **描述** | 节点用途 | `收集主题相关信息` |
| **类型** | Agent 节点或子图 | Agent |
| **模型** | 使用的大语言模型 | `claude-sonnet-4-5` |
| **Agent** | 预配置的智能体（可选） | - |
| **系统指令** | 行为说明 | `你是一个研究助手...` |
| **用户提示词** | 任务模板 | `研究：{topic}` |
| **工具** | MCP 服务器或系统工具 | `web_search`、`read_file` |
| **最大工具调用数** | 迭代上限（1-200） | `50` |

**Agent vs 模型**：选择现有 Agent 使用预配置行为，或选择模型手动配置提示词。

### 步骤 4：连接节点

1. 点击节点的连接按钮
2. 拖动到另一个节点创建连接
3. 重复此操作构建工作流

**开始与结束**：每个图都有 `start`（入口点）和 `end`（出口点）。将第一个节点连接到 `start`，最后一个节点连接到 `end`。

### 步骤 5：保存

点击工具栏的 **保存** 按钮。您的图现在可以运行了。

## 运行 Graph

### 从聊天界面

1. 从工作台打开 **聊天** 页面
2. 点击 **Graph 选择器** 下拉框
3. 选择您新创建的图
4. 输入内容并发送

图将根据连接关系按顺序执行节点。

## 示例：简单研究流程

一个基础的 3 节点工作流：

```
start → researcher → writer → reviewer → end
```

**节点配置**：

| 节点 | 模型 | 系统指令 | 工具 |
|------|------|---------|------|
| `researcher` | claude-sonnet-4-5 | 收集信息的研究助手 | `web_search` |
| `writer` | gpt-5 | 根据研究创建文章的内容撰写者 | - |
| `reviewer` | claude-sonnet-4-5 | 检查质量并提出改进建议的编辑 | - |

**执行流程**：输入主题 → researcher 收集信息 → writer 创建文章 → reviewer 检查质量 → 最终输出。

## 常见问题

| 问题 | 原因 | 解决方案 |
|-----|------|---------|
| 节点无法保存 | 缺少必填字段 | 确保已设置名称、模型/Agent |
| 图无法运行 | 未连接到 start/end | 检查所有节点是否已连接 |
| 执行顺序异常 | 连接关系错误 | 验证输入/输出关系 |
| 节点提前停止 | 达到最大迭代次数 | 增加最大工具调用数设置 |

## 下一步

- **[Graph 配置](config.zh.md)** - 探索所有配置选项
- **[Graph 执行](execution.zh.md)** - 了解图的运行方式
- **[子图](subgraph.zh.md)** - 在图中嵌套图
- **[Handoffs](handoffs.zh.md)** - 添加动态路由
- **[构建复杂工作流](complex-workflows.zh.md)** - 高级模式
