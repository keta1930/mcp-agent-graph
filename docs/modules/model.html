<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>模型管理 - MAG SDK</title>

    <link href="https://cdn.staticfile.org/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.staticfile.org/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link id="highlight-theme" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" rel="stylesheet">
    <link href="./shared.css" rel="stylesheet">

</head>
<body class="p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-6">
            <i class="fas fa-brain mr-3 text-blue-600"></i>模型管理
        </h1>

        <p class="text-lg mb-8" style="color: var(--text-muted)">
            MAG SDK 提供了完整的AI模型管理功能，支持添加、查看、更新和删除各种模型配置。
        </p>

        <!-- 添加模型 -->
        <div class="method-card p-6 mb-6">
            <h2 class="text-2xl font-semibold mb-4">
                <i class="fas fa-plus mr-2 text-green-600"></i>添加模型
            </h2>

            <p class="mb-4" style="color: var(--text-secondary)">
                使用 <code>add_model(config)</code> 添加新的模型配置。
            </p>

            <div class="code-block mb-4">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">函数签名</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">def add_model(config: Dict[str, Any]) -> Dict[str, Any]</code></pre>
            </div>

            <div class="code-block mb-4">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">使用示例</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">import mag

# 添加OpenAI模型
config = {
    "name": "gpt-4",
    "base_url": "https://api.openai.com/v1",
    "api_key": "your-openai-api-key",
    "model": "gpt-4"
}
result = mag.add_model(config)
print(result)

# 添加本地模型
local_config = {
    "name": "local-llama",
    "base_url": "http://localhost:8000/v1",
    "api_key": "local-key",
    "model": "llama-2-7b"
}
result = mag.add_model(local_config)</code></pre>
            </div>

            <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                <p class="text-sm text-blue-700">
                    <strong>参数说明：</strong><br>
                    • <code>name</code>: 模型名称（必填）<br>
                    • <code>base_url</code>: API基础URL（必填）<br>
                    • <code>api_key</code>: API密钥（必填）<br>
                    • <code>model</code>: 模型标识符（必填）
                </p>
            </div>
        </div>

        <!-- 列出模型 -->
        <div class="method-card p-6 mb-6">
            <h2 class="text-2xl font-semibold mb-4">
                <i class="fas fa-list mr-2 text-blue-600"></i>列出模型
            </h2>

            <p class="mb-4" style="color: var(--text-secondary)">
                使用 <code>list_model()</code> 获取所有已配置的模型。
            </p>

            <div class="code-block mb-4">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">函数签名</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">def list_model() -> List[Dict[str, Any]]</code></pre>
            </div>

            <div class="code-block mb-4">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">使用示例</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">import mag

# 获取所有模型
models = mag.list_model()

for model in models:
    print(f"模型名称: {model['name']}")
    print(f"API地址: {model['base_url']}")
    print(f"模型标识: {model['model']}")
    print("---")</code></pre>
            </div>
        </div>

        <!-- 获取模型 -->
        <div class="method-card p-6 mb-6">
            <h2 class="text-2xl font-semibold mb-4">
                <i class="fas fa-search mr-2 text-purple-600"></i>获取特定模型
            </h2>

            <p class="mb-4" style="color: var(--text-secondary)">
                使用 <code>get_model(name, detail)</code> 获取指定模型的配置信息。
            </p>

            <div class="code-block mb-4">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">函数签名</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">def get_model(name: str, detail: bool = True) -> Optional[Dict[str, Any]]</code></pre>
            </div>

            <div class="code-block mb-4">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">使用示例</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">import mag

# 获取详细配置（用于编辑）
model_detail = mag.get_model("gpt-4", detail=True)
if model_detail:
    print("详细配置:", model_detail)

# 获取基本配置
model_basic = mag.get_model("gpt-4", detail=False)
if model_basic:
    print("基本信息:", model_basic)

# 模型不存在时返回None
nonexistent = mag.get_model("nonexistent-model")
if nonexistent is None:
    print("模型不存在")</code></pre>
            </div>
        </div>

        <!-- 更新模型 -->
        <div class="method-card p-6 mb-6">
            <h2 class="text-2xl font-semibold mb-4">
                <i class="fas fa-edit mr-2 text-orange-600"></i>更新模型
            </h2>

            <p class="mb-4" style="color: var(--text-secondary)">
                使用 <code>update_model(name, config)</code> 更新现有模型的配置。
            </p>

            <div class="code-block mb-4">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">函数签名</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">def update_model(name: str, config: Dict[str, Any]) -> Dict[str, Any]</code></pre>
            </div>

            <div class="code-block mb-4">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">使用示例</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">import mag

# 更新模型配置
updated_config = {
    "name": "gpt-4-turbo",  # 可以修改名称
    "base_url": "https://api.openai.com/v1",
    "api_key": "new-api-key",  # 更新API密钥
    "model": "gpt-4-turbo-preview"  # 更新模型标识
}

result = mag.update_model("gpt-4", updated_config)
print(result)</code></pre>
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fas fa-exclamation-triangle text-yellow-400"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-yellow-700">
                            <strong>注意：</strong>更新模型时，所有必填字段都需要提供完整的配置信息。
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 删除模型 -->
        <div class="method-card p-6 mb-6">
            <h2 class="text-2xl font-semibold mb-4">
                <i class="fas fa-trash mr-2 text-red-600"></i>删除模型
            </h2>

            <p class="mb-4" style="color: var(--text-secondary)">
                使用 <code>delete_model(name)</code> 删除指定的模型配置。
            </p>

            <div class="code-block mb-4">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">函数签名</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">def delete_model(name: str) -> Dict[str, Any]</code></pre>
            </div>

            <div class="code-block mb-4">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">使用示例</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">import mag

# 删除指定模型
result = mag.delete_model("old-model")
print(result)

# 批量删除示例
models_to_delete = ["model-1", "model-2", "model-3"]
for model_name in models_to_delete:
    try:
        result = mag.delete_model(model_name)
        print(f"删除 {model_name}: {result}")
    except Exception as e:
        print(f"删除 {model_name} 失败: {e}")</code></pre>
            </div>

            <div class="bg-red-50 border-l-4 border-red-400 p-4 mb-4">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fas fa-exclamation-circle text-red-400"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-red-700">
                            <strong>警告：</strong>删除模型是不可逆操作，请确保不再需要该模型配置。
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 完整示例 -->
        <div class="method-card p-6">
            <h2 class="text-2xl font-semibold mb-4">
                <i class="fas fa-code mr-2 text-indigo-600"></i>完整示例
            </h2>

            <p class="mb-4" style="color: var(--text-secondary)">
                以下是一个完整的模型管理示例，展示了所有功能的使用：
            </p>

            <div class="code-block">
                <div class="flex justify-between items-center p-3 border-b border-gray-200">
                    <span class="text-sm font-medium text-gray-600">完整示例</span>
                    <button class="copy-btn px-3 py-1 text-xs rounded" onclick="copyCode(this)">复制</button>
                </div>
                <pre class="p-4 overflow-x-auto"><code class="language-python">import mag

# 启动服务
mag.start()

# 1. 添加多个模型
models_to_add = [
    {
        "name": "gpt-4",
        "base_url": "https://api.openai.com/v1",
        "api_key": "your-openai-key",
        "model": "gpt-4"
    },
    {
        "name": "claude-3",
        "base_url": "https://api.anthropic.com",
        "api_key": "your-anthropic-key",
        "model": "claude-3-opus-20240229"
    }
]

for config in models_to_add:
    result = mag.add_model(config)
    print(f"添加模型 {config['name']}: {result}")

# 2. 列出所有模型
print("\n=== 所有模型 ===")
models = mag.list_model()
for model in models:
    print(f"- {model['name']}: {model['model']}")

# 3. 获取特定模型详情
print("\n=== GPT-4 详情 ===")
gpt4_detail = mag.get_model("gpt-4")
if gpt4_detail:
    print(f"名称: {gpt4_detail['name']}")
    print(f"API地址: {gpt4_detail['base_url']}")

# 4. 更新模型
print("\n=== 更新模型 ===")
updated_config = {
    "name": "gpt-4-updated",
    "base_url": "https://api.openai.com/v1",
    "api_key": "updated-api-key",
    "model": "gpt-4-turbo"
}
update_result = mag.update_model("gpt-4", updated_config)
print(f"更新结果: {update_result}")

# 5. 删除不需要的模型
print("\n=== 删除模型 ===")
delete_result = mag.delete_model("claude-3")
print(f"删除结果: {delete_result}")

# 6. 最终模型列表
print("\n=== 最终模型列表 ===")
final_models = mag.list_model()
for model in final_models:
    print(f"- {model['name']}")</code></pre>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="./shared.js"></script>
</body>
</html>