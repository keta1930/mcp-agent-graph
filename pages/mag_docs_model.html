<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å‹ç®¡ç† - MAG SDK ä½¿ç”¨æ–‡æ¡£</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #fafafa;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* ä¾§è¾¹æ æ ·å¼ */
        .sidebar {
            width: 280px;
            background: #fff;
            border-right: 1px solid #e1e5e9;
            padding: 20px 0;
            overflow-y: auto;
            position: fixed;
            height: 100vh;
            z-index: 1000;
        }

        .logo {
            padding: 0 20px 20px;
            border-bottom: 1px solid #e1e5e9;
            margin-bottom: 20px;
        }

        .logo h1 {
            color: #2563eb;
            font-size: 24px;
            font-weight: 700;
        }

        .logo p {
            color: #6b7280;
            font-size: 14px;
            margin-top: 5px;
        }

        .nav {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            color: #4b5563;
            text-decoration: none;
            transition: all 0.2s;
            border-right: 3px solid transparent;
        }

        .nav-link:hover {
            background-color: #f3f4f6;
            color: #2563eb;
        }

        .nav-link.active {
            background-color: #eff6ff;
            color: #2563eb;
            border-right-color: #2563eb;
        }

        .nav-link i {
            margin-right: 10px;
            width: 16px;
        }

        /* æŠ˜å èœå•æ ·å¼ */
        .nav-group {
            margin-bottom: 10px;
        }

        .nav-group-title {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 20px;
            color: #374151;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .nav-group-title:hover {
            background-color: #f9fafb;
            color: #2563eb;
        }

        .nav-group-title.active {
            background-color: #eff6ff;
            color: #2563eb;
        }

        .nav-group-content {
            max-height: 500px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .nav-group-content .nav-link {
            padding-left: 50px;
            font-size: 14px;
        }

        .chevron {
            transition: transform 0.3s ease;
            transform: rotate(90deg);
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 40px 60px;
            background: #fff;
            min-height: 100vh;
        }

        /* é¡µé¢å¤´éƒ¨ */
        .page-header {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }

        .page-header h1 {
            color: #1f2937;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .page-header p {
            color: #6b7280;
            font-size: 1.1rem;
        }

        /* å†…å®¹åŒºå— */
        .section {
            margin-bottom: 50px;
        }

        .section h2 {
            color: #1f2937;
            font-size: 1.8rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h3 {
            color: #374151;
            font-size: 1.3rem;
            margin: 30px 0 15px;
        }

        .section p {
            color: #6b7280;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        /* ä»£ç å—æ ·å¼ */
        .code-block {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4b5563;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.2s;
        }

        .copy-btn:hover {
            background: #6b7280;
        }

        /* åŠŸèƒ½å¡ç‰‡ */
        .function-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            transition: all 0.3s ease;
        }

        .function-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .function-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .function-icon {
            background: #2563eb;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.5rem;
        }

        .function-title {
            color: #1f2937;
            font-size: 1.4rem;
            font-weight: 600;
        }

        /* å‚æ•°è¡¨æ ¼ */
        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .param-table th,
        .param-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .param-table th {
            background: #f9fafb;
            font-weight: 600;
            color: #374151;
        }

        .param-table tr:last-child td {
            border-bottom: none;
        }

        /* è¿”å›å€¼æ ·å¼ */
        .return-value {
            background: #ecfdf5;
            border: 1px solid #a7f3d0;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }

        .return-value h4 {
            color: #065f46;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .return-value p {
            color: #047857;
            margin: 0;
        }

        /* æ³¨æ„äº‹é¡¹ */
        .note {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }

        .note h4 {
            color: #92400e;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .note p {
            color: #b45309;
            margin: 0;
        }

        /* ç›®å½•å¯¼èˆª */
        .toc {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .toc h3 {
            color: #374151;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style: none;
            padding: 0;
        }

        .toc li {
            margin: 8px 0;
        }

        .toc a {
            color: #2563eb;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .toc a:hover {
            background: #eff6ff;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .main-content {
                margin-left: 0;
                padding: 20px;
            }

            .page-header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ä¾§è¾¹æ  -->
        <nav class="sidebar">
            <div class="logo">
                <h1><i class="fas fa-project-diagram"></i> MAG SDK</h1>
                <p>MCP Agent Graph å¼€å‘æ¡†æ¶</p>
            </div>
            
            <ul class="nav">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <i class="fas fa-home"></i>
                        æ¦‚è¿°
                    </a>
                </li>
                
                <li class="nav-group">
                    <div class="nav-group-title">
                        <span><i class="fas fa-cog"></i> ç³»ç»Ÿç®¡ç†</span>
                        <i class="fas fa-chevron-right chevron"></i>
                    </div>
                    <div class="nav-group-content" style="max-height: 0;">
                        <a href="system.html#system-start" class="nav-link">
                            <i class="fas fa-play"></i>
                            å¯åŠ¨æœåŠ¡
                        </a>
                        <a href="system.html#system-status" class="nav-link">
                            <i class="fas fa-info-circle"></i>
                            çŠ¶æ€æ£€æŸ¥
                        </a>
                        <a href="system.html#system-shutdown" class="nav-link">
                            <i class="fas fa-stop"></i>
                            å…³é—­æœåŠ¡
                        </a>
                    </div>
                </li>

                <li class="nav-group">
                    <div class="nav-group-title">
                        <span><i class="fas fa-project-diagram"></i> å›¾ç®¡ç†</span>
                        <i class="fas fa-chevron-right chevron"></i>
                    </div>
                    <div class="nav-group-content" style="max-height: 0;">
                        <a href="graph.html#graph-list" class="nav-link">åˆ—å‡ºå›¾</a>
                        <a href="graph.html#graph-get" class="nav-link">è·å–å›¾</a>
                        <a href="graph.html#graph-save" class="nav-link">ä¿å­˜å›¾</a>
                        <a href="graph.html#graph-delete" class="nav-link">åˆ é™¤å›¾</a>
                        <a href="graph.html#graph-run" class="nav-link">è¿è¡Œå›¾</a>
                        <a href="graph.html#graph-import" class="nav-link">å¯¼å…¥å›¾</a>
                        <a href="graph.html#graph-export" class="nav-link">å¯¼å‡ºå›¾</a>
                        <a href="graph.html#graph-mcp" class="nav-link">ç”ŸæˆMCPè„šæœ¬</a>
                    </div>
                </li>

                <li class="nav-group">
                    <div class="nav-group-title active">
                        <span><i class="fas fa-brain"></i> æ¨¡å‹ç®¡ç†</span>
                        <i class="fas fa-chevron-right chevron"></i>
                    </div>
                    <div class="nav-group-content">
                        <a href="#model-list" class="nav-link active">åˆ—å‡ºæ¨¡å‹</a>
                        <a href="#model-get" class="nav-link">è·å–æ¨¡å‹</a>
                        <a href="#model-add" class="nav-link">æ·»åŠ æ¨¡å‹</a>
                        <a href="#model-update" class="nav-link">æ›´æ–°æ¨¡å‹</a>
                        <a href="#model-delete" class="nav-link">åˆ é™¤æ¨¡å‹</a>
                    </div>
                </li>

                <li class="nav-group">
                    <div class="nav-group-title">
                        <span><i class="fas fa-server"></i> MCPç®¡ç†</span>
                        <i class="fas fa-chevron-right chevron"></i>
                    </div>
                    <div class="nav-group-content" style="max-height: 0;">
                        <a href="mcp.html#mcp-config" class="nav-link">é…ç½®ç®¡ç†</a>
                        <a href="mcp.html#mcp-status" class="nav-link">çŠ¶æ€æŸ¥çœ‹</a>
                        <a href="mcp.html#mcp-connect" class="nav-link">è¿æ¥æœåŠ¡å™¨</a>
                        <a href="mcp.html#mcp-tools" class="nav-link">å·¥å…·ç®¡ç†</a>
                        <a href="mcp.html#mcp-servers" class="nav-link">æœåŠ¡å™¨ç®¡ç†</a>
                    </div>
                </li>

                <li class="nav-group">
                    <div class="nav-group-title">
                        <span><i class="fas fa-comments"></i> ä¼šè¯ç®¡ç†</span>
                        <i class="fas fa-chevron-right chevron"></i>
                    </div>
                    <div class="nav-group-content" style="max-height: 0;">
                        <a href="conversation.html#conversation-list" class="nav-link">åˆ—å‡ºä¼šè¯</a>
                        <a href="conversation.html#conversation-get" class="nav-link">è·å–ä¼šè¯</a>
                        <a href="conversation.html#conversation-delete" class="nav-link">åˆ é™¤ä¼šè¯</a>
                    </div>
                </li>

                <li class="nav-item">
                    <a href="examples.html" class="nav-link">
                        <i class="fas fa-code"></i>
                        ç¤ºä¾‹æ•™ç¨‹
                    </a>
                </li>
            </ul>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="page-header">
                <h1><i class="fas fa-brain"></i> æ¨¡å‹ç®¡ç†</h1>
                <p>AIæ¨¡å‹çš„é…ç½®ã€ç®¡ç†å’Œç»´æŠ¤</p>
            </div>

            <!-- ç›®å½•å¯¼èˆª -->
            <div class="toc">
                <h3><i class="fas fa-list"></i> æœ¬é¡µå†…å®¹</h3>
                <ul>
                    <li><a href="#model-list">åˆ—å‡ºæ¨¡å‹ - mag.list_models()</a></li>
                    <li><a href="#model-get">è·å–æ¨¡å‹ - mag.get_model()</a></li>
                    <li><a href="#model-add">æ·»åŠ æ¨¡å‹ - mag.add_model()</a></li>
                    <li><a href="#model-update">æ›´æ–°æ¨¡å‹ - mag.update_model()</a></li>
                    <li><a href="#model-delete">åˆ é™¤æ¨¡å‹ - mag.delete_model()</a></li>
                </ul>
            </div>

            <!-- åˆ—å‡ºæ¨¡å‹ -->
            <section class="section" id="model-list">
                <div class="function-card">
                    <div class="function-header">
                        <div class="function-icon">
                            <i class="fas fa-list"></i>
                        </div>
                        <div class="function-title">mag.list_models()</div>
                    </div>
                    
                    <p>è·å–ç³»ç»Ÿä¸­æ‰€æœ‰å·²é…ç½®çš„AIæ¨¡å‹åˆ—è¡¨ã€‚è¿”å›æ¨¡å‹çš„åŸºæœ¬ä¿¡æ¯ï¼Œä½†ä¸åŒ…å«æ•æ„Ÿçš„APIå¯†é’¥ã€‚</p>

                    <h3>å‡½æ•°ç­¾å</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def list_models() -> List[Dict[str, Any]]:
    """
    è·å–æ‰€æœ‰æ¨¡å‹
    
    è¿”å›:
        List[Dict[str, Any]]: æ¨¡å‹é…ç½®åˆ—è¡¨
    """</code></pre>
                    </div>

                    <h3>è¿”å›å€¼</h3>
                    <div class="return-value">
                        <h4><i class="fas fa-check-circle"></i> è¿”å›å€¼è¯´æ˜</h4>
                        <p><strong>List[Dict[str, Any]]</strong> - åŒ…å«æ‰€æœ‰æ¨¡å‹é…ç½®çš„åˆ—è¡¨ï¼Œæ¯ä¸ªæ¨¡å‹åŒ…å«nameã€base_urlã€modelç­‰å­—æ®µ</p>
                    </div>

                    <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import mag

# å¯åŠ¨æœåŠ¡
mag.start()

# è·å–æ‰€æœ‰æ¨¡å‹åˆ—è¡¨
models = mag.list_models()
print(f"ç³»ç»Ÿä¸­å…±æœ‰ {len(models)} ä¸ªæ¨¡å‹:")

for i, model in enumerate(models, 1):
    print(f"\n{i}. {model['name']}")
    print(f"   åŸºç¡€URL: {model['base_url']}")
    print(f"   æ¨¡å‹æ ‡è¯†: {model['model']}")
    print(f"   APIå¯†é’¥: {'å·²é…ç½®' if model.get('api_key') else 'æœªé…ç½®'}")

# ç¤ºä¾‹è¾“å‡º:
# ç³»ç»Ÿä¸­å…±æœ‰ 3 ä¸ªæ¨¡å‹:
# 
# 1. gpt-4
#    åŸºç¡€URL: https://api.openai.com/v1/
#    æ¨¡å‹æ ‡è¯†: gpt-4
#    APIå¯†é’¥: å·²é…ç½®
# 
# 2. deepseek-chat
#    åŸºç¡€URL: https://gateway.ai.cloudflare.com/v1/.../deepseek/
#    æ¨¡å‹æ ‡è¯†: deepseek-chat
#    APIå¯†é’¥: å·²é…ç½®
</code></pre>
                    </div>

                    <h3>æŒ‰ç±»å‹åˆ†ç»„æ˜¾ç¤º</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def display_models_by_provider():
    """æŒ‰æä¾›å•†åˆ†ç»„æ˜¾ç¤ºæ¨¡å‹"""
    models = mag.list_models()
    
    # æŒ‰æä¾›å•†åˆ†ç»„
    providers = {}
    for model in models:
        # æ ¹æ®base_urlæ¨æ–­æä¾›å•†
        if 'openai.com' in model['base_url']:
            provider = 'OpenAI'
        elif 'deepseek' in model['base_url']:
            provider = 'DeepSeek'
        elif 'anthropic' in model['base_url']:
            provider = 'Anthropic'
        else:
            provider = 'å…¶ä»–'
        
        if provider not in providers:
            providers[provider] = []
        providers[provider].append(model)
    
    # æ˜¾ç¤ºåˆ†ç»„ç»“æœ
    for provider, provider_models in providers.items():
        print(f"\nğŸ“¡ {provider} ({len(provider_models)} ä¸ªæ¨¡å‹):")
        for model in provider_models:
            print(f"  â€¢ {model['name']} - {model['model']}")

# ä½¿ç”¨åˆ†ç»„æ˜¾ç¤º
display_models_by_provider()
</code></pre>
                    </div>
                </div>
            </section>

            <!-- è·å–æ¨¡å‹ -->
            <section class="section" id="model-get">
                <div class="function-card">
                    <div class="function-header">
                        <div class="function-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <div class="function-title">mag.get_model()</div>
                    </div>
                    
                    <p>è·å–æŒ‡å®šæ¨¡å‹çš„è¯¦ç»†é…ç½®ä¿¡æ¯ã€‚</p>

                    <h3>å‡½æ•°ç­¾å</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def get_model(name: str) -> Optional[Dict[str, Any]]:
    """
    è·å–æŒ‡å®šæ¨¡å‹çš„é…ç½®
    
    å‚æ•°:
        name (str): æ¨¡å‹åç§°
    
    è¿”å›:
        Optional[Dict[str, Any]]: æ¨¡å‹é…ç½®ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›None
    """</code></pre>
                    </div>

                    <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import mag

# è·å–ç‰¹å®šæ¨¡å‹ä¿¡æ¯
model_info = mag.get_model("gpt-4")

if model_info:
    print("æ¨¡å‹è¯¦ç»†ä¿¡æ¯:")
    print(f"åç§°: {model_info['name']}")
    print(f"åŸºç¡€URL: {model_info['base_url']}")
    print(f"æ¨¡å‹: {model_info['model']}")
    print(f"APIå¯†é’¥çŠ¶æ€: {'å·²é…ç½®' if model_info.get('api_key') else 'æœªé…ç½®'}")
else:
    print("æ¨¡å‹ä¸å­˜åœ¨")
</code></pre>
                    </div>
                </div>
            </section>

            <!-- æ·»åŠ æ¨¡å‹ -->
            <section class="section" id="model-add">
                <div class="function-card">
                    <div class="function-header">
                        <div class="function-icon">
                            <i class="fas fa-plus"></i>
                        </div>
                        <div class="function-title">mag.add_model()</div>
                    </div>
                    
                    <p>æ·»åŠ æ–°çš„AIæ¨¡å‹é…ç½®åˆ°ç³»ç»Ÿä¸­ã€‚æ¨¡å‹é…ç½®å®Œæˆåå³å¯åœ¨å›¾ä¸­ä½¿ç”¨ã€‚</p>

                    <h3>å‡½æ•°ç­¾å</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def add_model(config: Dict[str, Any]) -> Dict[str, Any]:
    """
    æ·»åŠ æ–°æ¨¡å‹
    
    å‚æ•°:
        config (Dict[str, Any]): æ¨¡å‹é…ç½®ï¼Œå¿…é¡»åŒ…å«ä»¥ä¸‹å­—æ®µ:
            - name: æ¨¡å‹åç§°
            - base_url: APIåŸºç¡€URL
            - api_key: APIå¯†é’¥
            - model: æ¨¡å‹æ ‡è¯†ç¬¦
    
    è¿”å›:
        Dict[str, Any]: æ“ä½œç»“æœ
    """</code></pre>
                    </div>

                    <h3>å‚æ•°è¯´æ˜</h3>
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th>å­—æ®µå</th>
                                <th>ç±»å‹</th>
                                <th>å¿…éœ€</th>
                                <th>è¯´æ˜</th>
                                <th>ç¤ºä¾‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>name</td>
                                <td>str</td>
                                <td>æ˜¯</td>
                                <td>æ¨¡å‹çš„å”¯ä¸€åç§°æ ‡è¯†</td>
                                <td>"gpt-4", "deepseek-chat"</td>
                            </tr>
                            <tr>
                                <td>base_url</td>
                                <td>str</td>
                                <td>æ˜¯</td>
                                <td>APIæœåŠ¡çš„åŸºç¡€URL</td>
                                <td>"https://api.openai.com/v1/"</td>
                            </tr>
                            <tr>
                                <td>api_key</td>
                                <td>str</td>
                                <td>æ˜¯</td>
                                <td>è®¿é—®APIçš„å¯†é’¥</td>
                                <td>"sk-..."</td>
                            </tr>
                            <tr>
                                <td>model</td>
                                <td>str</td>
                                <td>æ˜¯</td>
                                <td>APIä¸­çš„æ¨¡å‹æ ‡è¯†ç¬¦</td>
                                <td>"gpt-4", "deepseek-chat"</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import mag

# æ·»åŠ OpenAI GPT-4æ¨¡å‹
openai_model = {
    "name": "gpt-4",
    "base_url": "https://api.openai.com/v1/",
    "api_key": "sk-your-openai-api-key-here",
    "model": "gpt-4"
}

result = mag.add_model(openai_model)
print(f"OpenAIæ¨¡å‹æ·»åŠ ç»“æœ: {result}")

# æ·»åŠ DeepSeekæ¨¡å‹
deepseek_model = {
    "name": "deepseek-chat",
    "base_url": "https://gateway.ai.cloudflare.com/v1/your-id/deepseek/",
    "api_key": "sk-your-deepseek-api-key",
    "model": "deepseek-chat"
}

result = mag.add_model(deepseek_model)
print(f"DeepSeekæ¨¡å‹æ·»åŠ ç»“æœ: {result}")

# æ·»åŠ æœ¬åœ°æ¨¡å‹ï¼ˆå¦‚Ollamaï¼‰
local_model = {
    "name": "llama2-local",
    "base_url": "http://localhost:11434/v1/",
    "api_key": "not-needed",  # æœ¬åœ°æ¨¡å‹å¯èƒ½ä¸éœ€è¦APIå¯†é’¥
    "model": "llama2"
}

result = mag.add_model(local_model)
print(f"æœ¬åœ°æ¨¡å‹æ·»åŠ ç»“æœ: {result}")
</code></pre>
                    </div>

                    <h3>æ‰¹é‡æ·»åŠ æ¨¡å‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def batch_add_models(models_config):
    """æ‰¹é‡æ·»åŠ æ¨¡å‹"""
    results = []
    
    for model_config in models_config:
        try:
            result = mag.add_model(model_config)
            results.append({
                "name": model_config["name"],
                "status": "success" if result.get("status") == "success" else "failed",
                "message": result.get("message", "")
            })
            print(f"âœ… æ¨¡å‹ '{model_config['name']}' æ·»åŠ æˆåŠŸ")
        except Exception as e:
            results.append({
                "name": model_config["name"],
                "status": "error",
                "message": str(e)
            })
            print(f"âŒ æ¨¡å‹ '{model_config['name']}' æ·»åŠ å¤±è´¥: {e}")
    
    return results

# å‡†å¤‡å¤šä¸ªæ¨¡å‹é…ç½®
models_to_add = [
    {
        "name": "gpt-3.5-turbo",
        "base_url": "https://api.openai.com/v1/",
        "api_key": "your-openai-key",
        "model": "gpt-3.5-turbo"
    },
    {
        "name": "claude-3-sonnet",
        "base_url": "https://api.anthropic.com/",
        "api_key": "your-anthropic-key",
        "model": "claude-3-sonnet-20240229"
    }
]

# æ‰¹é‡æ·»åŠ 
batch_results = batch_add_models(models_to_add)
print(f"\næ‰¹é‡æ·»åŠ å®Œæˆï¼ŒæˆåŠŸ: {sum(1 for r in batch_results if r['status'] == 'success')} ä¸ª")
</code></pre>
                    </div>

                    <div class="note">
                        <h4><i class="fas fa-exclamation-triangle"></i> å®‰å…¨æç¤º</h4>
                        <p>â€¢ APIå¯†é’¥æ˜¯æ•æ„Ÿä¿¡æ¯ï¼Œè¯·å¦¥å–„ä¿ç®¡<br>
                        â€¢ ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç APIå¯†é’¥<br>
                        â€¢ å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ç®¡ç†APIå¯†é’¥<br>
                        â€¢ æ¨¡å‹åç§°å¿…é¡»æ˜¯å”¯ä¸€çš„</p>
                    </div>
                </div>
            </section>

            <!-- æ›´æ–°æ¨¡å‹ -->
            <section class="section" id="model-update">
                <div class="function-card">
                    <div class="function-header">
                        <div class="function-icon">
                            <i class="fas fa-edit"></i>
                        </div>
                        <div class="function-title">mag.update_model()</div>
                    </div>
                    
                    <p>æ›´æ–°ç°æœ‰æ¨¡å‹çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚APIå¯†é’¥æ›´æ¢ã€URLå˜æ›´ç­‰ã€‚</p>

                    <h3>å‡½æ•°ç­¾å</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def update_model(name: str, config: Dict[str, Any]) -> Dict[str, Any]:
    """
    æ›´æ–°ç°æœ‰æ¨¡å‹
    
    å‚æ•°:
        name (str): å½“å‰æ¨¡å‹åç§°
        config (Dict[str, Any]): æ›´æ–°åçš„æ¨¡å‹é…ç½®
    
    è¿”å›:
        Dict[str, Any]: æ“ä½œç»“æœ
    """</code></pre>
                    </div>

                    <h3>å‚æ•°è¯´æ˜</h3>
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th>å‚æ•°å</th>
                                <th>ç±»å‹</th>
                                <th>å¿…éœ€</th>
                                <th>è¯´æ˜</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>name</td>
                                <td>str</td>
                                <td>æ˜¯</td>
                                <td>è¦æ›´æ–°çš„æ¨¡å‹åç§°</td>
                            </tr>
                            <tr>
                                <td>config</td>
                                <td>Dict[str, Any]</td>
                                <td>æ˜¯</td>
                                <td>æ–°çš„æ¨¡å‹é…ç½®ï¼ŒåŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import mag

# æ›´æ–°æ¨¡å‹é…ç½®
updated_config = {
    "name": "gpt-4",  # å¯ä»¥ä¿æŒä¸å˜æˆ–ä¿®æ”¹åç§°
    "base_url": "https://api.openai.com/v1/",
    "api_key": "sk-new-api-key-here",  # æ›´æ–°APIå¯†é’¥
    "model": "gpt-4-turbo"  # æ›´æ–°æ¨¡å‹ç‰ˆæœ¬
}

result = mag.update_model("gpt-4", updated_config)
print(f"æ¨¡å‹æ›´æ–°ç»“æœ: {result}")

# ä»…æ›´æ–°APIå¯†é’¥
def update_api_key(model_name, new_api_key):
    """ä»…æ›´æ–°æ¨¡å‹çš„APIå¯†é’¥"""
    # å…ˆè·å–å½“å‰é…ç½®
    current_config = mag.get_model(model_name)
    
    if not current_config:
        print(f"æ¨¡å‹ '{model_name}' ä¸å­˜åœ¨")
        return False
    
    # æ›´æ–°APIå¯†é’¥
    current_config["api_key"] = new_api_key
    
    # ä¿å­˜æ›´æ–°
    result = mag.update_model(model_name, current_config)
    
    if result.get("status") == "success":
        print(f"âœ… æ¨¡å‹ '{model_name}' çš„APIå¯†é’¥å·²æ›´æ–°")
        return True
    else:
        print(f"âŒ æ›´æ–°å¤±è´¥: {result.get('message', 'Unknown error')}")
        return False

# ä½¿ç”¨APIå¯†é’¥æ›´æ–°å‡½æ•°
update_api_key("deepseek-chat", "sk-new-deepseek-key")
</code></pre>
                    </div>

                    <h3>æ¨¡å‹é‡å‘½å</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def rename_model(old_name, new_name):
    """é‡å‘½åæ¨¡å‹"""
    # è·å–å½“å‰é…ç½®
    current_config = mag.get_model(old_name)
    
    if not current_config:
        print(f"æ¨¡å‹ '{old_name}' ä¸å­˜åœ¨")
        return False
    
    # æ£€æŸ¥æ–°åç§°æ˜¯å¦å·²å­˜åœ¨
    if mag.get_model(new_name):
        print(f"æ¨¡å‹åç§° '{new_name}' å·²å­˜åœ¨")
        return False
    
    # æ›´æ–°åç§°
    current_config["name"] = new_name
    
    # æ›´æ–°æ¨¡å‹ï¼ˆè¿™ä¼šåˆ›å»ºæ–°åç§°çš„æ¨¡å‹ï¼‰
    result = mag.update_model(old_name, current_config)
    
    if result.get("status") == "success":
        print(f"âœ… æ¨¡å‹å·²ä» '{old_name}' é‡å‘½åä¸º '{new_name}'")
        return True
    else:
        print(f"âŒ é‡å‘½åå¤±è´¥: {result.get('message', 'Unknown error')}")
        return False

# é‡å‘½åæ¨¡å‹
rename_model("old-model-name", "new-model-name")
</code></pre>
                    </div>
                </div>
            </section>

            <!-- åˆ é™¤æ¨¡å‹ -->
            <section class="section" id="model-delete">
                <div class="function-card">
                    <div class="function-header">
                        <div class="function-icon">
                            <i class="fas fa-trash"></i>
                        </div>
                        <div class="function-title">mag.delete_model()</div>
                    </div>
                    
                    <p>ä»ç³»ç»Ÿä¸­åˆ é™¤æŒ‡å®šçš„æ¨¡å‹é…ç½®ã€‚åˆ é™¤åè¯¥æ¨¡å‹å°†æ— æ³•åœ¨å›¾ä¸­ä½¿ç”¨ã€‚</p>

                    <h3>å‡½æ•°ç­¾å</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def delete_model(name: str) -> Dict[str, Any]:
    """
    åˆ é™¤æ¨¡å‹
    
    å‚æ•°:
        name (str): æ¨¡å‹åç§°
    
    è¿”å›:
        Dict[str, Any]: æ“ä½œç»“æœ
    """</code></pre>
                    </div>

                    <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import mag

# åˆ é™¤æ¨¡å‹
result = mag.delete_model("old-model")
print(f"åˆ é™¤ç»“æœ: {result}")

# å®‰å…¨åˆ é™¤ï¼ˆå¸¦ç¡®è®¤ï¼‰
def safe_delete_model(model_name):
    """å®‰å…¨åœ°åˆ é™¤æ¨¡å‹ï¼ŒåŒ…å«ç¡®è®¤æ­¥éª¤"""
    # æ£€æŸ¥æ¨¡å‹æ˜¯å¦å­˜åœ¨
    model_config = mag.get_model(model_name)
    if not model_config:
        print(f"æ¨¡å‹ '{model_name}' ä¸å­˜åœ¨")
        return False
    
    # æ˜¾ç¤ºæ¨¡å‹ä¿¡æ¯
    print(f"å³å°†åˆ é™¤æ¨¡å‹: {model_name}")
    print(f"åŸºç¡€URL: {model_config['base_url']}")
    print(f"æ¨¡å‹æ ‡è¯†: {model_config['model']}")
    
    # TODO: æ£€æŸ¥æ˜¯å¦æœ‰å›¾æ­£åœ¨ä½¿ç”¨æ­¤æ¨¡å‹
    # graphs_using_model = find_graphs_using_model(model_name)
    # if graphs_using_model:
    #     print(f"è­¦å‘Š: ä»¥ä¸‹å›¾æ­£åœ¨ä½¿ç”¨æ­¤æ¨¡å‹: {graphs_using_model}")
    
    # ç¡®è®¤åˆ é™¤
    confirm = input("ç¡®è®¤åˆ é™¤æ­¤æ¨¡å‹? (yes/no): ")
    if confirm.lower() == 'yes':
        result = mag.delete_model(model_name)
        if result.get("status") == "success":
            print(f"âœ… æ¨¡å‹ '{model_name}' å·²åˆ é™¤")
            return True
        else:
            print(f"âŒ åˆ é™¤å¤±è´¥: {result.get('message', 'Unknown error')}")
            return False
    else:
        print("å–æ¶ˆåˆ é™¤æ“ä½œ")
        return False

# ä½¿ç”¨å®‰å…¨åˆ é™¤
safe_delete_model("test-model")
</code></pre>
                    </div>

                    <h3>æ‰¹é‡åˆ é™¤æ¨¡å‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def batch_delete_models(model_names, confirm=True):
    """æ‰¹é‡åˆ é™¤æ¨¡å‹"""
    if confirm:
        print(f"å³å°†åˆ é™¤ {len(model_names)} ä¸ªæ¨¡å‹:")
        for name in model_names:
            print(f"  - {name}")
        
        confirm_input = input("ç¡®è®¤æ‰¹é‡åˆ é™¤? (yes/no): ")
        if confirm_input.lower() != 'yes':
            print("å–æ¶ˆæ‰¹é‡åˆ é™¤æ“ä½œ")
            return
    
    results = []
    for model_name in model_names:
        try:
            result = mag.delete_model(model_name)
            if result.get("status") == "success":
                print(f"âœ… åˆ é™¤ '{model_name}' æˆåŠŸ")
                results.append({"name": model_name, "status": "success"})
            else:
                print(f"âŒ åˆ é™¤ '{model_name}' å¤±è´¥: {result.get('message', 'Unknown error')}")
                results.append({"name": model_name, "status": "failed", "message": result.get('message', '')})
        except Exception as e:
            print(f"âŒ åˆ é™¤ '{model_name}' å‡ºé”™: {e}")
            results.append({"name": model_name, "status": "error", "message": str(e)})
    
    successful = sum(1 for r in results if r["status"] == "success")
    print(f"\næ‰¹é‡åˆ é™¤å®Œæˆ: æˆåŠŸ {successful}/{len(model_names)} ä¸ª")
    return results

# æ‰¹é‡åˆ é™¤æµ‹è¯•æ¨¡å‹
test_models = ["test-model-1", "test-model-2", "old-model"]
batch_delete_models(test_models)
</code></pre>
                    </div>

                    <div class="note">
                        <h4><i class="fas fa-exclamation-triangle"></i> åˆ é™¤æ³¨æ„äº‹é¡¹</h4>
                        <p>â€¢ åˆ é™¤æ“ä½œä¸å¯é€†ï¼Œè¯·è°¨æ…æ“ä½œ<br>
                        â€¢ åˆ é™¤å‰å»ºè®®æ£€æŸ¥æ˜¯å¦æœ‰å›¾æ­£åœ¨ä½¿ç”¨è¯¥æ¨¡å‹<br>
                        â€¢ å»ºè®®åœ¨åˆ é™¤å‰å¤‡ä»½æ¨¡å‹é…ç½®<br>
                        â€¢ åˆ é™¤æ¨¡å‹ä¸ä¼šå½±å“å·²å®Œæˆçš„ä¼šè¯è®°å½•</p>
                    </div>
                </div>
            </section>

            <!-- æ¨¡å‹ç®¡ç†æœ€ä½³å®è·µ -->
            <section class="section">
                <h2><i class="fas fa-lightbulb"></i> æœ€ä½³å®è·µ</h2>

                <h3>APIå¯†é’¥ç®¡ç†</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    <pre><code class="language-python">import os
import mag

# ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†APIå¯†é’¥
def add_model_with_env_key(model_name, base_url, model_id, env_key_name):
    """ä½¿ç”¨ç¯å¢ƒå˜é‡ä¸­çš„APIå¯†é’¥æ·»åŠ æ¨¡å‹"""
    api_key = os.getenv(env_key_name)
    
    if not api_key:
        print(f"é”™è¯¯: ç¯å¢ƒå˜é‡ {env_key_name} æœªè®¾ç½®")
        return False
    
    model_config = {
        "name": model_name,
        "base_url": base_url,
        "api_key": api_key,
        "model": model_id
    }
    
    result = mag.add_model(model_config)
    return result.get("status") == "success"

# ä½¿ç”¨ç¤ºä¾‹
# è®¾ç½®ç¯å¢ƒå˜é‡: export OPENAI_API_KEY="sk-your-key"
add_model_with_env_key(
    model_name="gpt-4-env",
    base_url="https://api.openai.com/v1/",
    model_id="gpt-4",
    env_key_name="OPENAI_API_KEY"
)
</code></pre>
                </div>

                <h3>æ¨¡å‹é…ç½®å¤‡ä»½ä¸æ¢å¤</h3>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    <pre><code class="language-python">import json
import mag
from datetime import datetime

def backup_models(backup_file=None):
    """å¤‡ä»½æ‰€æœ‰æ¨¡å‹é…ç½®"""
    if not backup_file:
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        backup_file = f"models_backup_{timestamp}.json"
    
    models = mag.list_models()
    
    # å¤‡ä»½æ—¶ç§»é™¤æ•æ„Ÿçš„APIå¯†é’¥
    safe_models = []
    for model in models:
        safe_model = model.copy()
        safe_model["api_key"] = "*** REMOVED FOR BACKUP ***"
        safe_models.append(safe_model)
    
    with open(backup_file, 'w', encoding='utf-8') as f:
        json.dump(safe_models, f, indent=2, ensure_ascii=False)
    
    print(f"âœ… æ¨¡å‹é…ç½®å·²å¤‡ä»½åˆ°: {backup_file}")
    print(f"å¤‡ä»½äº† {len(safe_models)} ä¸ªæ¨¡å‹")
    return backup_file

def restore_models_structure(backup_file):
    """ä»å¤‡ä»½æ–‡ä»¶æ¢å¤æ¨¡å‹ç»“æ„ï¼ˆéœ€è¦æ‰‹åŠ¨è®¾ç½®APIå¯†é’¥ï¼‰"""
    try:
        with open(backup_file, 'r', encoding='utf-8') as f:
            models = json.load(f)
        
        print(f"ä»å¤‡ä»½æ–‡ä»¶ {backup_file} è¯»å–åˆ° {len(models)} ä¸ªæ¨¡å‹")
        print("æ³¨æ„: éœ€è¦æ‰‹åŠ¨è®¾ç½®APIå¯†é’¥")
        
        for model in models:
            print(f"\næ¨¡å‹: {model['name']}")
            print(f"åŸºç¡€URL: {model['base_url']}")
            print(f"æ¨¡å‹æ ‡è¯†: {model['model']}")
            print("è¯·æ‰‹åŠ¨è®¾ç½®APIå¯†é’¥åè°ƒç”¨ mag.add_model()")
        
        return models
    except Exception as e:
        print(f"æ¢å¤å¤‡ä»½å¤±è´¥: {e}")
        return None

# å¤‡ä»½æ¨¡å‹
backup_file = backup_models()

# æŸ¥çœ‹å¤‡ä»½å†…å®¹
models_structure = restore_models_structure(backup_file)
</code></pre>
                </div>
            </section>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script>
        // å¤åˆ¶ä»£ç åŠŸèƒ½
        function copyCode(button) {
            const code = button.nextElementSibling.textContent;
            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.textContent;
                button.textContent = 'å·²å¤åˆ¶!';
                button.style.background = '#10b981';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '#4b5563';
                }, 2000);
            });
        }

        // å¯¼èˆªé“¾æ¥ç‚¹å‡»å¤„ç†
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                // ç§»é™¤å…¶ä»–æ´»åŠ¨çŠ¶æ€
                document.querySelectorAll('.nav-link.active').forEach(el => {
                    el.classList.remove('active');
                });
                // æ·»åŠ æ´»åŠ¨çŠ¶æ€åˆ°å½“å‰é“¾æ¥
                e.target.classList.add('active');
            });
        });

        // é¡µé¢å†…é”šç‚¹æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // ä»£ç é«˜äº®
        Prism.highlightAll();
    </script>
</body>
</html>