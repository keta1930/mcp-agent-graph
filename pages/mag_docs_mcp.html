<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCPç®¡ç† - MAG SDK ä½¿ç”¨æ–‡æ¡£</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #fafafa;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* ä¾§è¾¹æ æ ·å¼ */
        .sidebar {
            width: 280px;
            background: #fff;
            border-right: 1px solid #e1e5e9;
            padding: 20px 0;
            overflow-y: auto;
            position: fixed;
            height: 100vh;
            z-index: 1000;
        }

        .logo {
            padding: 0 20px 20px;
            border-bottom: 1px solid #e1e5e9;
            margin-bottom: 20px;
        }

        .logo h1 {
            color: #2563eb;
            font-size: 24px;
            font-weight: 700;
        }

        .logo p {
            color: #6b7280;
            font-size: 14px;
            margin-top: 5px;
        }

        .nav {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            color: #4b5563;
            text-decoration: none;
            transition: all 0.2s;
            border-right: 3px solid transparent;
        }

        .nav-link:hover {
            background-color: #f3f4f6;
            color: #2563eb;
        }

        .nav-link.active {
            background-color: #eff6ff;
            color: #2563eb;
            border-right-color: #2563eb;
        }

        .nav-link i {
            margin-right: 10px;
            width: 16px;
        }

        /* æŠ˜å èœå•æ ·å¼ */
        .nav-group {
            margin-bottom: 10px;
        }

        .nav-group-title {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 20px;
            color: #374151;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .nav-group-title:hover {
            background-color: #f9fafb;
            color: #2563eb;
        }

        .nav-group-title.active {
            background-color: #eff6ff;
            color: #2563eb;
        }

        .nav-group-content {
            max-height: 500px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .nav-group-content .nav-link {
            padding-left: 50px;
            font-size: 14px;
        }

        .chevron {
            transition: transform 0.3s ease;
            transform: rotate(90deg);
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 40px 60px;
            background: #fff;
            min-height: 100vh;
        }

        /* é¡µé¢å¤´éƒ¨ */
        .page-header {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }

        .page-header h1 {
            color: #1f2937;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .page-header p {
            color: #6b7280;
            font-size: 1.1rem;
        }

        /* å†…å®¹åŒºå— */
        .section {
            margin-bottom: 50px;
        }

        .section h2 {
            color: #1f2937;
            font-size: 1.8rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h3 {
            color: #374151;
            font-size: 1.3rem;
            margin: 30px 0 15px;
        }

        .section p {
            color: #6b7280;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        /* ä»£ç å—æ ·å¼ */
        .code-block {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4b5563;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.2s;
        }

        .copy-btn:hover {
            background: #6b7280;
        }

        /* åŠŸèƒ½å¡ç‰‡ */
        .function-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            transition: all 0.3s ease;
        }

        .function-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .function-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .function-icon {
            background: #2563eb;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.5rem;
        }

        .function-title {
            color: #1f2937;
            font-size: 1.4rem;
            font-weight: 600;
        }

        /* å‚æ•°è¡¨æ ¼ */
        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .param-table th,
        .param-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .param-table th {
            background: #f9fafb;
            font-weight: 600;
            color: #374151;
        }

        .param-table tr:last-child td {
            border-bottom: none;
        }

        /* è¿”å›å€¼æ ·å¼ */
        .return-value {
            background: #ecfdf5;
            border: 1px solid #a7f3d0;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }

        .return-value h4 {
            color: #065f46;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .return-value p {
            color: #047857;
            margin: 0;
        }

        /* æ³¨æ„äº‹é¡¹ */
        .note {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }

        .note h4 {
            color: #92400e;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .note p {
            color: #b45309;
            margin: 0;
        }

        /* ç›®å½•å¯¼èˆª */
        .toc {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .toc h3 {
            color: #374151;
            margin-bottom: 15px;
        }

        .toc ul {
            list-style: none;
            padding: 0;
        }

        .toc li {
            margin: 8px 0;
        }

        .toc a {
            color: #2563eb;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .toc a:hover {
            background: #eff6ff;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .main-content {
                margin-left: 0;
                padding: 20px;
            }

            .page-header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ä¾§è¾¹æ  -->
        <nav class="sidebar">
            <div class="logo">
                <h1><i class="fas fa-project-diagram"></i> MAG SDK</h1>
                <p>MCP Agent Graph å¼€å‘æ¡†æ¶</p>
            </div>
            
            <ul class="nav">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <i class="fas fa-home"></i>
                        æ¦‚è¿°
                    </a>
                </li>
                
                <li class="nav-group">
                    <div class="nav-group-title">
                        <span><i class="fas fa-cog"></i> ç³»ç»Ÿç®¡ç†</span>
                        <i class="fas fa-chevron-right chevron"></i>
                    </div>
                    <div class="nav-group-content" style="max-height: 0;">
                        <a href="system.html#system-start" class="nav-link">
                            <i class="fas fa-play"></i>
                            å¯åŠ¨æœåŠ¡
                        </a>
                        <a href="system.html#system-status" class="nav-link">
                            <i class="fas fa-info-circle"></i>
                            çŠ¶æ€æ£€æŸ¥
                        </a>
                        <a href="system.html#system-shutdown" class="nav-link">
                            <i class="fas fa-stop"></i>
                            å…³é—­æœåŠ¡
                        </a>
                    </div>
                </li>

                <li class="nav-group">
                    <div class="nav-group-title">
                        <span><i class="fas fa-project-diagram"></i> å›¾ç®¡ç†</span>
                        <i class="fas fa-chevron-right chevron"></i>
                    </div>
                    <div class="nav-group-content" style="max-height: 0;">
                        <a href="graph.html#graph-list" class="nav-link">åˆ—å‡ºå›¾</a>
                        <a href="graph.html#graph-get" class="nav-link">è·å–å›¾</a>
                        <a href="graph.html#graph-save" class="nav-link">ä¿å­˜å›¾</a>
                        <a href="graph.html#graph-delete" class="nav-link">åˆ é™¤å›¾</a>
                        <a href="graph.html#graph-run" class="nav-link">è¿è¡Œå›¾</a>
                        <a href="graph.html#graph-import" class="nav-link">å¯¼å…¥å›¾</a>
                        <a href="graph.html#graph-export" class="nav-link">å¯¼å‡ºå›¾</a>
                        <a href="graph.html#graph-mcp" class="nav-link">ç”ŸæˆMCPè„šæœ¬</a>
                    </div>
                </li>

                <li class="nav-group">
                    <div class="nav-group-title">
                        <span><i class="fas fa-brain"></i> æ¨¡å‹ç®¡ç†</span>
                        <i class="fas fa-chevron-right chevron"></i>
                    </div>
                    <div class="nav-group-content" style="max-height: 0;">
                        <a href="model.html#model-list" class="nav-link">åˆ—å‡ºæ¨¡å‹</a>
                        <a href="model.html#model-add" class="nav-link">æ·»åŠ æ¨¡å‹</a>
                        <a href="model.html#model-update" class="nav-link">æ›´æ–°æ¨¡å‹</a>
                        <a href="model.html#model-delete" class="nav-link">åˆ é™¤æ¨¡å‹</a>
                    </div>
                </li>

                <li class="nav-group">
                    <div class="nav-group-title active">
                        <span><i class="fas fa-server"></i> MCPç®¡ç†</span>
                        <i class="fas fa-chevron-right chevron"></i>
                    </div>
                    <div class="nav-group-content">
                        <a href="#mcp-config" class="nav-link active">é…ç½®ç®¡ç†</a>
                        <a href="#mcp-status" class="nav-link">çŠ¶æ€æŸ¥çœ‹</a>
                        <a href="#mcp-connect" class="nav-link">è¿æ¥æœåŠ¡å™¨</a>
                        <a href="#mcp-tools" class="nav-link">å·¥å…·ç®¡ç†</a>
                        <a href="#mcp-servers" class="nav-link">æœåŠ¡å™¨ç®¡ç†</a>
                    </div>
                </li>

                <li class="nav-group">
                    <div class="nav-group-title">
                        <span><i class="fas fa-comments"></i> ä¼šè¯ç®¡ç†</span>
                        <i class="fas fa-chevron-right chevron"></i>
                    </div>
                    <div class="nav-group-content" style="max-height: 0;">
                        <a href="conversation.html#conversation-list" class="nav-link">åˆ—å‡ºä¼šè¯</a>
                        <a href="conversation.html#conversation-get" class="nav-link">è·å–ä¼šè¯</a>
                        <a href="conversation.html#conversation-delete" class="nav-link">åˆ é™¤ä¼šè¯</a>
                    </div>
                </li>

                <li class="nav-item">
                    <a href="examples.html" class="nav-link">
                        <i class="fas fa-code"></i>
                        ç¤ºä¾‹æ•™ç¨‹
                    </a>
                </li>
            </ul>
        </nav>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="page-header">
                <h1><i class="fas fa-server"></i> MCPç®¡ç†</h1>
                <p>MCPæœåŠ¡å™¨çš„é…ç½®ã€è¿æ¥å’Œå·¥å…·ç®¡ç†</p>
            </div>

            <!-- ç›®å½•å¯¼èˆª -->
            <div class="toc">
                <h3><i class="fas fa-list"></i> æœ¬é¡µå†…å®¹</h3>
                <ul>
                    <li><a href="#mcp-config">é…ç½®ç®¡ç† - è·å–å’Œæ›´æ–°MCPé…ç½®</a></li>
                    <li><a href="#mcp-status">çŠ¶æ€æŸ¥çœ‹ - mag.get_mcp_status()</a></li>
                    <li><a href="#mcp-connect">è¿æ¥æœåŠ¡å™¨ - mag.connect_mcp()</a></li>
                    <li><a href="#mcp-tools">å·¥å…·ç®¡ç† - mag.get_tools()</a></li>
                    <li><a href="#mcp-servers">æœåŠ¡å™¨ç®¡ç† - æ·»åŠ å’Œåˆ é™¤æœåŠ¡å™¨</a></li>
                </ul>
            </div>

            <!-- é…ç½®ç®¡ç† -->
            <section class="section" id="mcp-config">
                <div class="function-card">
                    <div class="function-header">
                        <div class="function-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <div class="function-title">MCPé…ç½®ç®¡ç†</div>
                    </div>
                    
                    <p>MCPé…ç½®ç®¡ç†åŒ…æ‹¬è·å–å½“å‰é…ç½®å’Œæ›´æ–°é…ç½®ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ã€‚</p>

                    <h3>è·å–MCPé…ç½® - mag.get_mcp_config()</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def get_mcp_config() -> Dict[str, Any]:
    """
    è·å–MCPé…ç½®
    
    è¿”å›:
        Dict[str, Any]: MCPé…ç½®
    """</code></pre>
                    </div>

                    <h3>æ›´æ–°MCPé…ç½® - mag.update_mcp_config()</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def update_mcp_config(config: Dict[str, Any]) -> Dict[str, Dict[str, Any]]:
    """
    æ›´æ–°MCPé…ç½®
    
    å‚æ•°:
        config (Dict[str, Any]): MCPé…ç½®
    
    è¿”å›:
        Dict[str, Dict[str, Any]]: æ“ä½œç»“æœ
    """</code></pre>
                    </div>

                    <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import mag
import json

# è·å–å½“å‰MCPé…ç½®
current_config = mag.get_mcp_config()
print("å½“å‰MCPé…ç½®:")
print(json.dumps(current_config, indent=2, ensure_ascii=False))

# æ›´æ–°MCPé…ç½®ï¼ˆå®Œæ•´æ›¿æ¢ï¼‰
new_config = {
    "mcpServers": {
        "fetch": {
            "autoApprove": ["fetch"],
            "timeout": 60,
            "command": "uvx",
            "args": ["mcp-server-fetch"],
            "transportType": "stdio"
        },
        "memory": {
            "autoApprove": [],
            "timeout": 60,
            "command": "docker",
            "args": [
                "run", "-i", "-v", 
                "claude-memory:/app/dist",
                "--rm", "mcp/memory"
            ],
            "transportType": "stdio"
        },
        "tavily-mcp": {
            "command": "npx",
            "args": ["-y", "tavily-mcp@0.1.2"],
            "env": {
                "TAVILY_API_KEY": "tvly-dev-your-api-key"
            }
        }
    }
}

# æ‰§è¡Œé…ç½®æ›´æ–°
result = mag.update_mcp_config(new_config)
print("\né…ç½®æ›´æ–°ç»“æœ:")
print(json.dumps(result, indent=2, ensure_ascii=False))
</code></pre>
                    </div>

                    <div class="note">
                        <h4><i class="fas fa-exclamation-triangle"></i> é…ç½®æ›´æ–°æ³¨æ„äº‹é¡¹</h4>
                        <p>â€¢ update_mcp_config() ä¼šå®Œå…¨æ›¿æ¢ç°æœ‰é…ç½®<br>
                        â€¢ æ›´æ–°é…ç½®åä¼šè‡ªåŠ¨å°è¯•é‡æ–°è¿æ¥æ‰€æœ‰æœåŠ¡å™¨<br>
                        â€¢ å»ºè®®åœ¨æ›´æ–°å‰å¤‡ä»½å½“å‰é…ç½®<br>
                        â€¢ ç¯å¢ƒå˜é‡ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚APIå¯†é’¥ï¼‰éœ€è¦æ­£ç¡®è®¾ç½®</p>
                    </div>
                </div>
            </section>

            <!-- çŠ¶æ€æŸ¥çœ‹ -->
            <section class="section" id="mcp-status">
                <div class="function-card">
                    <div class="function-header">
                        <div class="function-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="function-title">mag.get_mcp_status()</div>
                    </div>
                    
                    <p>è·å–æ‰€æœ‰MCPæœåŠ¡å™¨çš„å½“å‰è¿æ¥çŠ¶æ€å’Œå¯ç”¨å·¥å…·ä¿¡æ¯ã€‚</p>

                    <h3>å‡½æ•°ç­¾å</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def get_mcp_status() -> Dict[str, Dict[str, Any]]:
    """
    è·å–MCPæœåŠ¡å™¨çŠ¶æ€
    
    è¿”å›:
        Dict[str, Dict[str, Any]]: æœåŠ¡å™¨çŠ¶æ€å­—å…¸
    """</code></pre>
                    </div>

                    <h3>è¿”å›å€¼</h3>
                    <div class="return-value">
                        <h4><i class="fas fa-check-circle"></i> è¿”å›å€¼è¯´æ˜</h4>
                        <p><strong>Dict[str, Dict[str, Any]]</strong> - æœåŠ¡å™¨çŠ¶æ€å­—å…¸ï¼Œæ¯ä¸ªæœåŠ¡å™¨åŒ…å«connectedã€toolsç­‰çŠ¶æ€ä¿¡æ¯</p>
                    </div>

                    <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import mag

# è·å–MCPæœåŠ¡å™¨çŠ¶æ€
status = mag.get_mcp_status()

print("MCPæœåŠ¡å™¨çŠ¶æ€æ€»è§ˆ:")
print(f"é…ç½®çš„æœåŠ¡å™¨æ•°é‡: {len(status)}")

# ç»Ÿè®¡è¿æ¥çŠ¶æ€
connected_count = 0
total_tools = 0

for server_name, server_status in status.items():
    is_connected = server_status.get('connected', False)
    tools_count = len(server_status.get('tools', []))
    
    print(f"\nğŸ“¡ {server_name}")
    print(f"   çŠ¶æ€: {'ğŸŸ¢ å·²è¿æ¥' if is_connected else 'ğŸ”´ æœªè¿æ¥'}")
    print(f"   å·¥å…·æ•°é‡: {tools_count}")
    
    if is_connected:
        connected_count += 1
        total_tools += tools_count
        
        # æ˜¾ç¤ºå·¥å…·åˆ—è¡¨
        if tools_count > 0:
            print("   å¯ç”¨å·¥å…·:")
            for tool in server_status.get('tools', []):
                print(f"     â€¢ {tool}")

print(f"\nğŸ“Š çŠ¶æ€æ±‡æ€»:")
print(f"   å·²è¿æ¥: {connected_count}/{len(status)} ä¸ªæœåŠ¡å™¨")
print(f"   æ€»å·¥å…·æ•°: {total_tools} ä¸ª")
</code></pre>
                    </div>

                    <h3>çŠ¶æ€ç›‘æ§å’Œå‘Šè­¦</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def monitor_mcp_health():
                    """ç›‘æ§MCPæœåŠ¡å™¨å¥åº·çŠ¶æ€"""
                    status = mag.get_mcp_status()
                    
                    issues = []
                    for server_name, server_status in status.items():
                        if not server_status.get('connected', False):
                            issues.append(f"æœåŠ¡å™¨ '{server_name}' æœªè¿æ¥")
                        elif len(server_status.get('tools', [])) == 0:
                            issues.append(f"æœåŠ¡å™¨ '{server_name}' å·²è¿æ¥ä½†æ— å¯ç”¨å·¥å…·")
                    
                    if issues:
                        print("âš ï¸  å‘ç°ä»¥ä¸‹é—®é¢˜:")
                        for issue in issues:
                            print(f"   â€¢ {issue}")
                        return False
                    else:
                        print("âœ… æ‰€æœ‰MCPæœåŠ¡å™¨è¿è¡Œæ­£å¸¸")
                        return True

# å¥åº·æ£€æŸ¥
is_healthy = monitor_mcp_health()

# è¯¦ç»†çŠ¶æ€æŠ¥å‘Š
def generate_status_report():
    """ç”Ÿæˆè¯¦ç»†çš„çŠ¶æ€æŠ¥å‘Š"""
    status = mag.get_mcp_status()
    
    report = []
    report.append("# MCPæœåŠ¡å™¨çŠ¶æ€æŠ¥å‘Š")
    report.append(f"ç”Ÿæˆæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    report.append("")
    
    for server_name, server_status in status.items():
        report.append(f"## {server_name}")
        report.append(f"- è¿æ¥çŠ¶æ€: {'å·²è¿æ¥' if server_status.get('connected') else 'æœªè¿æ¥'}")
        report.append(f"- å·¥å…·æ•°é‡: {len(server_status.get('tools', []))}")
        
        if server_status.get('tools'):
            report.append("- å¯ç”¨å·¥å…·:")
            for tool in server_status.get('tools', []):
                report.append(f"  - {tool}")
        
        report.append("")
    
    return "\n".join(report)

# ç”Ÿæˆå¹¶ä¿å­˜æŠ¥å‘Š
report = generate_status_report()
with open("mcp_status_report.md", "w", encoding="utf-8") as f:
    f.write(report)
print("çŠ¶æ€æŠ¥å‘Šå·²ä¿å­˜åˆ°: mcp_status_report.md")
</code></pre>
                    </div>
                </div>
            </section>

            <!-- è¿æ¥æœåŠ¡å™¨ -->
            <section class="section" id="mcp-connect">
                <div class="function-card">
                    <div class="function-header">
                        <div class="function-icon">
                            <i class="fas fa-plug"></i>
                        </div>
                        <div class="function-title">mag.connect_mcp()</div>
                    </div>
                    
                    <p>è¿æ¥æŒ‡å®šçš„MCPæœåŠ¡å™¨æˆ–è¿æ¥æ‰€æœ‰é…ç½®çš„æœåŠ¡å™¨ã€‚</p>

                    <h3>å‡½æ•°ç­¾å</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def connect_mcp(server_name: str) -> Dict[str, Any]:
    """
    è¿æ¥æŒ‡å®šçš„MCPæœåŠ¡å™¨
    
    å‚æ•°:
        server_name (str): æœåŠ¡å™¨åç§°ï¼Œä½¿ç”¨ "all" è¿æ¥æ‰€æœ‰æœåŠ¡å™¨
    
    è¿”å›:
        Dict[str, Any]: è¿æ¥ç»“æœ
    """</code></pre>
                    </div>

                    <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import mag

# è¿æ¥å•ä¸ªæœåŠ¡å™¨
result = mag.connect_mcp("tavily-mcp")
print(f"è¿æ¥tavily-mcpç»“æœ: {result}")

# è¿æ¥æ‰€æœ‰æœåŠ¡å™¨
all_result = mag.connect_mcp("all")
print("è¿æ¥æ‰€æœ‰æœåŠ¡å™¨ç»“æœ:")
print(json.dumps(all_result, indent=2, ensure_ascii=False))

# æ™ºèƒ½è¿æ¥ï¼šåªè¿æ¥æœªè¿æ¥çš„æœåŠ¡å™¨
def smart_connect_all():
    """æ™ºèƒ½è¿æ¥ï¼šåªè¿æ¥æœªè¿æ¥çš„æœåŠ¡å™¨"""
    # å…ˆè·å–çŠ¶æ€
    status = mag.get_mcp_status()
    
    disconnected_servers = []
    for server_name, server_status in status.items():
        if not server_status.get('connected', False):
            disconnected_servers.append(server_name)
    
    if not disconnected_servers:
        print("âœ… æ‰€æœ‰æœåŠ¡å™¨éƒ½å·²è¿æ¥")
        return True
    
    print(f"å‘ç° {len(disconnected_servers)} ä¸ªæœªè¿æ¥çš„æœåŠ¡å™¨:")
    for server in disconnected_servers:
        print(f"  â€¢ {server}")
    
    # å°è¯•è¿æ¥æœªè¿æ¥çš„æœåŠ¡å™¨
    success_count = 0
    for server_name in disconnected_servers:
        try:
            result = mag.connect_mcp(server_name)
            if result.get('status') == 'success':
                print(f"âœ… {server_name} è¿æ¥æˆåŠŸ")
                success_count += 1
            else:
                print(f"âŒ {server_name} è¿æ¥å¤±è´¥: {result.get('error', 'Unknown error')}")
        except Exception as e:
            print(f"âŒ {server_name} è¿æ¥å‡ºé”™: {e}")
    
    print(f"\nè¿æ¥å®Œæˆ: {success_count}/{len(disconnected_servers)} ä¸ªæœåŠ¡å™¨æˆåŠŸè¿æ¥")
    return success_count == len(disconnected_servers)

# ä½¿ç”¨æ™ºèƒ½è¿æ¥
smart_connect_all()
</code></pre>
                    </div>

                    <h3>è¿æ¥é‡è¯•æœºåˆ¶</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import time

def connect_with_retry(server_name, max_retries=3, delay=2):
    """å¸¦é‡è¯•æœºåˆ¶çš„è¿æ¥å‡½æ•°"""
    for attempt in range(max_retries):
        try:
            print(f"å°è¯•è¿æ¥ {server_name} (ç¬¬ {attempt + 1}/{max_retries} æ¬¡)...")
            result = mag.connect_mcp(server_name)
            
            if result.get('status') == 'success':
                print(f"âœ… {server_name} è¿æ¥æˆåŠŸ!")
                return True
            else:
                error_msg = result.get('error', 'Unknown error')
                print(f"âŒ è¿æ¥å¤±è´¥: {error_msg}")
                
                if attempt < max_retries - 1:
                    print(f"ç­‰å¾… {delay} ç§’åé‡è¯•...")
                    time.sleep(delay)
        
        except Exception as e:
            print(f"âŒ è¿æ¥å‡ºé”™: {e}")
            if attempt < max_retries - 1:
                print(f"ç­‰å¾… {delay} ç§’åé‡è¯•...")
                time.sleep(delay)
    
    print(f"âŒ {server_name} è¿æ¥å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°")
    return False

# ä½¿ç”¨é‡è¯•è¿æ¥
success = connect_with_retry("problematic-server", max_retries=3, delay=2)
</code></pre>
                    </div>
                </div>
            </section>

            <!-- å·¥å…·ç®¡ç† -->
            <section class="section" id="mcp-tools">
                <div class="function-card">
                    <div class="function-header">
                        <div class="function-icon">
                            <i class="fas fa-tools"></i>
                        </div>
                        <div class="function-title">mag.get_tools()</div>
                    </div>
                    
                    <p>è·å–æ‰€æœ‰MCPæœåŠ¡å™¨æä¾›çš„å·¥å…·è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å·¥å…·åç§°ã€æè¿°ã€å‚æ•°ç­‰ã€‚</p>

                    <h3>å‡½æ•°ç­¾å</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def get_tools() -> Dict[str, List[Dict[str, Any]]]:
    """
    è·å–æ‰€æœ‰MCPå·¥å…·ä¿¡æ¯
    
    è¿”å›:
        Dict[str, List[Dict[str, Any]]]: æŒ‰æœåŠ¡å™¨åˆ†ç»„çš„å·¥å…·ä¿¡æ¯
    """</code></pre>
                    </div>

                    <h3>è¿”å›å€¼</h3>
                    <div class="return-value">
                        <h4><i class="fas fa-check-circle"></i> è¿”å›å€¼è¯´æ˜</h4>
                        <p><strong>Dict[str, List[Dict[str, Any]]]</strong> - æŒ‰æœåŠ¡å™¨åˆ†ç»„çš„å·¥å…·ä¿¡æ¯ï¼Œæ¯ä¸ªå·¥å…·åŒ…å«nameã€descriptionç­‰è¯¦ç»†ä¿¡æ¯</p>
                    </div>

                    <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import mag
import json

# è·å–æ‰€æœ‰å·¥å…·ä¿¡æ¯
tools_info = mag.get_tools()

print("MCPå·¥å…·ä¿¡æ¯:")
print(f"å…±æœ‰ {len(tools_info)} ä¸ªæœåŠ¡æä¾›å·¥å…·")

total_tools = 0
for server_name, tools in tools_info.items():
    total_tools += len(tools)
    print(f"\nğŸ”§ {server_name} ({len(tools)} ä¸ªå·¥å…·):")
    
    for i, tool in enumerate(tools, 1):
        print(f"   {i}. {tool.get('name', 'Unknown')}")
        print(f"      æè¿°: {tool.get('description', 'æ— æè¿°')}")
        
        # æ˜¾ç¤ºå·¥å…·å‚æ•°ï¼ˆå¦‚æœæœ‰ï¼‰
        if 'inputSchema' in tool:
            schema = tool['inputSchema']
            if 'properties' in schema:
                print(f"      å‚æ•°: {list(schema['properties'].keys())}")

print(f"\nğŸ“Š æ€»è®¡: {total_tools} ä¸ªå·¥å…·")

# è¯¦ç»†å·¥å…·ä¿¡æ¯å±•ç¤º
def display_tool_details(server_name=None, tool_name=None):
    """æ˜¾ç¤ºå·¥å…·çš„è¯¦ç»†ä¿¡æ¯"""
    tools_info = mag.get_tools()
    
    for srv_name, tools in tools_info.items():
        # å¦‚æœæŒ‡å®šäº†æœåŠ¡å™¨åç§°ï¼Œåªæ˜¾ç¤ºè¯¥æœåŠ¡å™¨çš„å·¥å…·
        if server_name and srv_name != server_name:
            continue
            
        for tool in tools:
            # å¦‚æœæŒ‡å®šäº†å·¥å…·åç§°ï¼Œåªæ˜¾ç¤ºè¯¥å·¥å…·
            if tool_name and tool.get('name') != tool_name:
                continue
                
            print(f"\nğŸ”§ å·¥å…·: {tool.get('name', 'Unknown')}")
            print(f"   æœåŠ¡å™¨: {srv_name}")
            print(f"   æè¿°: {tool.get('description', 'æ— æè¿°')}")
            
            # æ˜¾ç¤ºè¯¦ç»†çš„å‚æ•°ä¿¡æ¯
            if 'inputSchema' in tool:
                schema = tool['inputSchema']
                print("   å‚æ•°è¯¦æƒ…:")
                print(json.dumps(schema, indent=6, ensure_ascii=False))

# æ˜¾ç¤ºç‰¹å®šæœåŠ¡å™¨çš„å·¥å…·
display_tool_details(server_name="tavily-mcp")

# æ˜¾ç¤ºç‰¹å®šå·¥å…·çš„è¯¦æƒ…
display_tool_details(tool_name="search")
</code></pre>
                    </div>

                    <h3>å·¥å…·åˆ†ç±»å’Œæœç´¢</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def categorize_tools():
    """å°†å·¥å…·æŒ‰åŠŸèƒ½åˆ†ç±»"""
    tools_info = mag.get_tools()
    
    categories = {
        "æœç´¢å·¥å…·": [],
        "æ–‡ä»¶æ“ä½œ": [],
        "æ•°æ®å¤„ç†": [],
        "ç½‘ç»œè¯·æ±‚": [],
        "å…¶ä»–": []
    }
    
    # æ ¹æ®å·¥å…·åç§°å’Œæè¿°è¿›è¡Œåˆ†ç±»
    for server_name, tools in tools_info.items():
        for tool in tools:
            tool_name = tool.get('name', '').lower()
            tool_desc = tool.get('description', '').lower()
            
            tool_info = {
                'name': tool.get('name'),
                'server': server_name,
                'description': tool.get('description', 'æ— æè¿°')
            }
            
            if any(keyword in tool_name or keyword in tool_desc 
                   for keyword in ['search', 'find', 'æœç´¢', 'æŸ¥æ‰¾']):
                categories["æœç´¢å·¥å…·"].append(tool_info)
            elif any(keyword in tool_name or keyword in tool_desc 
                     for keyword in ['file', 'read', 'write', 'æ–‡ä»¶', 'è¯»å–', 'å†™å…¥']):
                categories["æ–‡ä»¶æ“ä½œ"].append(tool_info)
            elif any(keyword in tool_name or keyword in tool_desc 
                     for keyword in ['data', 'process', 'analysis', 'æ•°æ®', 'å¤„ç†', 'åˆ†æ']):
                categories["æ•°æ®å¤„ç†"].append(tool_info)
            elif any(keyword in tool_name or keyword in tool_desc 
                     for keyword in ['fetch', 'request', 'http', 'api', 'è¯·æ±‚']):
                categories["ç½‘ç»œè¯·æ±‚"].append(tool_info)
            else:
                categories["å…¶ä»–"].append(tool_info)
    
    # æ˜¾ç¤ºåˆ†ç±»ç»“æœ
    for category, tools in categories.items():
        if tools:
            print(f"\nğŸ“‚ {category} ({len(tools)} ä¸ª):")
            for tool in tools:
                print(f"   â€¢ {tool['name']} ({tool['server']})")
                print(f"     {tool['description']}")

# å·¥å…·åˆ†ç±»å±•ç¤º
categorize_tools()

def search_tools(keyword):
    """æœç´¢åŒ…å«å…³é”®è¯çš„å·¥å…·"""
    tools_info = mag.get_tools()
    matching_tools = []
    
    for server_name, tools in tools_info.items():
        for tool in tools:
            tool_name = tool.get('name', '').lower()
            tool_desc = tool.get('description', '').lower()
            
            if keyword.lower() in tool_name or keyword.lower() in tool_desc:
                matching_tools.append({
                    'name': tool.get('name'),
                    'server': server_name,
                    'description': tool.get('description', 'æ— æè¿°')
                })
    
    if matching_tools:
        print(f"\nğŸ” æœç´¢ '{keyword}' æ‰¾åˆ° {len(matching_tools)} ä¸ªå·¥å…·:")
        for tool in matching_tools:
            print(f"   â€¢ {tool['name']} ({tool['server']})")
            print(f"     {tool['description']}")
    else:
        print(f"æœªæ‰¾åˆ°åŒ…å« '{keyword}' çš„å·¥å…·")
    
    return matching_tools

# æœç´¢å·¥å…·
search_results = search_tools("search")
</code></pre>
                    </div>
                </div>
            </section>

            <!-- æœåŠ¡å™¨ç®¡ç† -->
            <section class="section" id="mcp-servers">
                <div class="function-card">
                    <div class="function-header">
                        <div class="function-icon">
                            <i class="fas fa-server"></i>
                        </div>
                        <div class="function-title">MCPæœåŠ¡å™¨ç®¡ç†</div>
                    </div>
                    
                    <p>MCPæœåŠ¡å™¨çš„æ·»åŠ å’Œåˆ é™¤ç®¡ç†åŠŸèƒ½ã€‚</p>

                    <h3>æ·»åŠ æœåŠ¡å™¨ - mag.add_server()</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def add_server(servers: Dict[str, Any]) -> Dict[str, Any]:
    """
    æ·»åŠ æ–°çš„MCPæœåŠ¡å™¨é…ç½®
    
    å‚æ•°:
        servers (Dict[str, Any]): åŒ…å«mcpServersçš„å®Œæ•´é…ç½®
    
    è¿”å›:
        Dict[str, Any]: æ·»åŠ ç»“æœ
    """</code></pre>
                    </div>

                    <h3>åˆ é™¤æœåŠ¡å™¨ - mag.remove_server()</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def remove_server(names: Union[str, List[str]]) -> Dict[str, Any]:
    """
    åˆ é™¤MCPæœåŠ¡å™¨é…ç½®ï¼ˆæ”¯æŒå•ä¸ªæˆ–æ‰¹é‡åˆ é™¤ï¼‰
    
    å‚æ•°:
        names (Union[str, List[str]]): æœåŠ¡å™¨åç§°æˆ–æœåŠ¡å™¨åç§°åˆ—è¡¨
    
    è¿”å›:
        Dict[str, Any]: åˆ é™¤ç»“æœ
    """</code></pre>
                    </div>

                    <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">import mag
import json

# æ·»åŠ æ–°çš„MCPæœåŠ¡å™¨
new_servers = {
    "mcpServers": {
        "fetch": {
            "autoApprove": ["fetch"],
            "timeout": 60,
            "command": "uvx",
            "args": ["mcp-server-fetch"],
            "transportType": "stdio"
        },
        "memory": {
            "autoApprove": [],
            "timeout": 60,
            "command": "docker",
            "args": [
                "run", "-i", "-v",
                "claude-memory:/app/dist",
                "--rm", "mcp/memory"
            ],
            "transportType": "stdio"
        }
    }
}

# æ‰§è¡Œæ·»åŠ æ“ä½œ
add_result = mag.add_server(new_servers)
print("æ·»åŠ æœåŠ¡å™¨ç»“æœ:")
print(json.dumps(add_result, indent=2, ensure_ascii=False))

# å¤„ç†æ·»åŠ ç»“æœ
if add_result['status'] == 'success':
    print(f"âœ… æˆåŠŸæ·»åŠ  {len(add_result['added_servers'])} ä¸ªæœåŠ¡å™¨")
    for server in add_result['added_servers']:
        print(f"   â€¢ {server}")
        
    if add_result['duplicate_servers']:
        print(f"âš ï¸  è·³è¿‡ {len(add_result['duplicate_servers'])} ä¸ªé‡å¤æœåŠ¡å™¨")
        for server in add_result['duplicate_servers']:
            print(f"   â€¢ {server}")

# åˆ é™¤æœåŠ¡å™¨ï¼ˆå•ä¸ªï¼‰
remove_result = mag.remove_server("old-server")
print(f"åˆ é™¤å•ä¸ªæœåŠ¡å™¨ç»“æœ: {remove_result}")

# æ‰¹é‡åˆ é™¤æœåŠ¡å™¨
servers_to_remove = ["test-server-1", "test-server-2"]
batch_remove_result = mag.remove_server(servers_to_remove)
print("æ‰¹é‡åˆ é™¤ç»“æœ:")
print(json.dumps(batch_remove_result, indent=2, ensure_ascii=False))
</code></pre>
                    </div>

                    <h3>æœåŠ¡å™¨é…ç½®æ¨¡æ¿</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python"># å¸¸ç”¨MCPæœåŠ¡å™¨é…ç½®æ¨¡æ¿

# FetchæœåŠ¡å™¨ï¼ˆç½‘ç»œè¯·æ±‚ï¼‰
fetch_server = {
    "mcpServers": {
        "fetch": {
            "autoApprove": ["fetch"],
            "timeout": 60,
            "command": "uvx",
            "args": ["mcp-server-fetch"],
            "transportType": "stdio"
        }
    }
}

# MemoryæœåŠ¡å™¨ï¼ˆè®°å¿†åŠŸèƒ½ï¼‰
memory_server = {
    "mcpServers": {
        "memory": {
            "autoApprove": [],
            "timeout": 60,
            "command": "docker",
            "args": [
                "run", "-i", "-v",
                "claude-memory:/app/dist",
                "--rm", "mcp/memory"
            ],
            "transportType": "stdio"
        }
    }
}

# Tavilyæœç´¢æœåŠ¡å™¨
tavily_server = {
    "mcpServers": {
        "tavily-mcp": {
            "command": "npx",
            "args": ["-y", "tavily-mcp@0.1.2"],
            "env": {
                "TAVILY_API_KEY": "your-tavily-api-key"
            }
        }
    }
}

# é¡ºåºæ€è€ƒæœåŠ¡å™¨
sequential_thinking_server = {
    "mcpServers": {
        "sequentialthinking": {
            "command": "docker",
            "args": [
                "run", "--rm", "-i",
                "mcp/sequentialthinking"
            ]
        }
    }
}

# æ‰¹é‡æ·»åŠ å¤šä¸ªæœåŠ¡å™¨
def setup_common_servers():
    """è®¾ç½®å¸¸ç”¨çš„MCPæœåŠ¡å™¨"""
    servers_to_add = [
        ("FetchæœåŠ¡å™¨", fetch_server),
        ("MemoryæœåŠ¡å™¨", memory_server),
        ("Tavilyæœç´¢", tavily_server),
        ("é¡ºåºæ€è€ƒ", sequential_thinking_server)
    ]
    
    for name, config in servers_to_add:
        print(f"æ·»åŠ  {name}...")
        result = mag.add_server(config)
        
        if result['status'] == 'success':
            print(f"âœ… {name} æ·»åŠ æˆåŠŸ")
        elif result['status'] == 'partial_success':
            print(f"âš ï¸  {name} éƒ¨åˆ†æˆåŠŸ")
        else:
            print(f"âŒ {name} æ·»åŠ å¤±è´¥: {result.get('message', 'Unknown error')}")

# æ‰§è¡Œæ‰¹é‡è®¾ç½®
setup_common_servers()
</code></pre>
                    </div>

                    <h3>æœåŠ¡å™¨ç®¡ç†æœ€ä½³å®è·µ</h3>
                    <div class="code-block">
                        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                        <pre><code class="language-python">def backup_mcp_config():
    """å¤‡ä»½å½“å‰MCPé…ç½®"""
    config = mag.get_mcp_config()
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    backup_file = f"mcp_config_backup_{timestamp}.json"
    
    with open(backup_file, 'w', encoding='utf-8') as f:
        json.dump(config, f, indent=2, ensure_ascii=False)
    
    print(f"âœ… MCPé…ç½®å·²å¤‡ä»½åˆ°: {backup_file}")
    return backup_file

def validate_server_config(server_config):
    """éªŒè¯æœåŠ¡å™¨é…ç½®çš„æœ‰æ•ˆæ€§"""
    required_fields = ['command']
    errors = []
    
    for server_name, config in server_config.get('mcpServers', {}).items():
        if not isinstance(config, dict):
            errors.append(f"æœåŠ¡å™¨ '{server_name}' çš„é…ç½®å¿…é¡»æ˜¯å­—å…¸ç±»å‹")
            continue
            
        for field in required_fields:
            if field not in config:
                errors.append(f"æœåŠ¡å™¨ '{server_name}' ç¼ºå°‘å¿…éœ€å­—æ®µ: {field}")
        
        # æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
        if 'env' in config:
            for env_key, env_value in config['env'].items():
                if not env_value or env_value.startswith('your-'):
                    errors.append(f"æœåŠ¡å™¨ '{server_name}' çš„ç¯å¢ƒå˜é‡ '{env_key}' éœ€è¦è®¾ç½®å®é™…å€¼")
    
    return errors

def safe_add_server(server_config):
    """å®‰å…¨åœ°æ·»åŠ æœåŠ¡å™¨ï¼ˆåŒ…å«éªŒè¯å’Œå¤‡ä»½ï¼‰"""
    # å¤‡ä»½å½“å‰é…ç½®
    backup_file = backup_mcp_config()
    
    # éªŒè¯é…ç½®
    errors = validate_server_config(server_config)
    if errors:
        print("âŒ é…ç½®éªŒè¯å¤±è´¥:")
        for error in errors:
            print(f"   â€¢ {error}")
        return False
    
    # æ·»åŠ æœåŠ¡å™¨
    try:
        result = mag.add_server(server_config)
        if result['status'] in ['success', 'partial_success']:
            print("âœ… æœåŠ¡å™¨æ·»åŠ æˆåŠŸ")
            return True
        else:
            print(f"âŒ æ·»åŠ å¤±è´¥: {result.get('message', 'Unknown error')}")
            return False
    except Exception as e:
        print(f"âŒ æ·»åŠ è¿‡ç¨‹ä¸­å‡ºé”™: {e}")
        return False

# ä½¿ç”¨å®‰å…¨æ·»åŠ 
new_server = {
    "mcpServers": {
        "test-server": {
            "command": "echo",
            "args": ["test"]
        }
    }
}

safe_add_server(new_server)
</code></pre>
                    </div>

                    <div class="note">
                        <h4><i class="fas fa-exclamation-triangle"></i> æœåŠ¡å™¨ç®¡ç†æ³¨æ„äº‹é¡¹</h4>
                        <p>â€¢ æ·»åŠ æœåŠ¡å™¨å‰å»ºè®®å¤‡ä»½å½“å‰é…ç½®<br>
                        â€¢ ç¡®ä¿å¿…è¦çš„ç¯å¢ƒå˜é‡å·²æ­£ç¡®è®¾ç½®<br>
                        â€¢ åˆ é™¤æœåŠ¡å™¨ä¼šåŒæ—¶æ–­å¼€å…¶è¿æ¥<br>
                        â€¢ æœåŠ¡å™¨åç§°å¿…é¡»å”¯ä¸€<br>
                        â€¢ ä¿®æ”¹é…ç½®åéœ€è¦é‡æ–°è¿æ¥æ‰èƒ½ç”Ÿæ•ˆ</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script>
        // å¤åˆ¶ä»£ç åŠŸèƒ½
        function copyCode(button) {
            const code = button.nextElementSibling.textContent;
            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.textContent;
                button.textContent = 'å·²å¤åˆ¶!';
                button.style.background = '#10b981';
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '#4b5563';
                }, 2000);
            });
        }

        // å¯¼èˆªé“¾æ¥ç‚¹å‡»å¤„ç†
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                // ç§»é™¤å…¶ä»–æ´»åŠ¨çŠ¶æ€
                document.querySelectorAll('.nav-link.active').forEach(el => {
                    el.classList.remove('active');
                });
                // æ·»åŠ æ´»åŠ¨çŠ¶æ€åˆ°å½“å‰é“¾æ¥
                e.target.classList.add('active');
            });
        });

        // é¡µé¢å†…é”šç‚¹æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // ä»£ç é«˜äº®
        Prism.highlightAll();
    </script>
</body>
</html>